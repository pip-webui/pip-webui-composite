<<<<<<< HEAD
{"version":3,"sources":["composite.js","pip-webui-composite-html.js","checklist_edit/checklist_edit.js","checklist_view/checklist_view.js","composite_edit/composite_edit.js","composite_summary/composite_summary.js","composite_toolbar/composite_toolbar.js","content_switch/content_switch.js","composite_view/composite_view.js","utilities/composite_focused.js","mobile_mouse/mobile_mousedown.js","mobile_mouse/mobile_mouseup.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1gBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9dA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pip-webui-composite.js","sourcesContent":["/**\r\n * @file Registration of composite WebUI controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipComposite', [        \r\n        'pipContentSwitch',\r\n        'pipChecklistEdit',\r\n        'pipChecklistView',\r\n        'pipCompositeEdit',\r\n        'pipCompositeView',\r\n        'pipCompositeSummary',\r\n        'pipCompositeToolbar',\r\n        'pipCompositeFocused',\r\n\r\n        'pipMobileMouseup',\r\n        'pipMobileMousedown'\r\n    ]);\r\n    \r\n})();\r\n\r\n\r\n","(function(module) {\ntry {\n  module = angular.module('pipComposite.Templates');\n} catch (e) {\n  module = angular.module('pipComposite.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('checklist_edit/checklist_edit.html',\n    '<!--\\n' +\n    '@file Checklist edit control content\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<div ng-class=\"{\\'pip-checklist-draggable\\': selected.drag}\" id=\"{{\\'checklist-\\'  + selected.id}}\">\\n' +\n    '    <div ng-repeat=\"item in checklistContent\"\\n' +\n    '         ng-mousedown=\"onClick($event, $index)\"\\n' +\n    '         class=\"pip-checklist-item\"\\n' +\n    '         id=\"{{\\'check-item-\\'  + selected.id + \\'-\\' +  $index}}\"\\n' +\n    '         pip-drag=\"checklistContent.length > 1 && selected.drag && !item.empty\"\\n' +\n    '         pip-drag-data=\"item\"\\n' +\n    '         pip-force-touch = \"true\"\\n' +\n    '         pip-touch-delay=\"30\"\\n' +\n    '         pip-drop=\"true\"\\n' +\n    '         pip-drag-stop=\"onStop(selected.id)\"\\n' +\n    '         pip-drag-start=\"onStart(selected.id)\"\\n' +\n    '         pip-scroll-container=\"pipScrollContainer\"\\n' +\n    '         pip-drop-success=\"onDropComplete($index, $data, $event, selected.id)\">\\n' +\n    '\\n' +\n    '        <div ng-class=\"{\\'put_place\\': selected.drag}\"></div>\\n' +\n    '        <div class=\"pip-checklist-item-body layout-row layout-align-start-start\"\\n' +\n    '             pip-cancel-drag=\"true\"\\n' +\n    '             ng-class=\"{ \\'select-active-item\\': isSelectedItem($index) }\">\\n' +\n    '\\n' +\n    '            <div class=\"pip-checklist-button\"  pip-cancel-drag=\"true\">\\n' +\n    '                <md-button pip-drag-handle\\n' +\n    '                           class=\"pip-icon-checklist-button md-icon-button no-ripple-container\"\\n' +\n    '                           aria-label=\"REARRANGE\"\\n' +\n    '                           tabindex=\"-1\"\\n' +\n    '                           pip-mobile-mousedown=\"onDownDragg(item)\"\\n' +\n    '                           pip-mobile-mouseup=\"onDraggEnd()\"\\n' +\n    '                           ng-if=\"pipDraggable && checklistContent.length > 2 && !item.empty\"\\n' +\n    '                           ng-class=\"checklistContent.length > 1 ? \\'cursor-move\\' : \\'cursor-default\\'\"\\n' +\n    '                           ng-disabled=\"ngDisabled()\">\\n' +\n    '                    <md-icon class=\"text-grey\" md-svg-icon=\"icons:vhandle\"></md-icon>\\n' +\n    '                </md-button>\\n' +\n    '            </div>\\n' +\n    '            <div class=\"pip-checklist-button\" style=\"overflow: hidden\"  pip-cancel-drag=\"true\">\\n' +\n    '                <div class=\"pip-checklist-button-container\">\\n' +\n    '                    <md-button class=\"pip-icon-checklist-button md-icon-button\"\\n' +\n    '                               ng-show=\"item.empty\"\\n' +\n    '                               ng-disabled=\"ngDisabled()\"\\n' +\n    '                               md-ink-ripple\\n' +\n    '                               ng-click=\"onAddItem()\"\\n' +\n    '                               tabindex=\"-1\"\\n' +\n    '                               aria-label=\"PLUS\">\\n' +\n    '                        <md-icon class=\"text-grey\" md-svg-icon=\"icons:plus\"></md-icon>\\n' +\n    '                    </md-button>\\n' +\n    '                    <md-checkbox ng-model=\"item.checked\"\\n' +\n    '                                 ng-show=\"!item.empty\"\\n' +\n    '                                 aria-label=\"COMPLETE\"\\n' +\n    '                                 pip-cancel-drag=\"true\"\\n' +\n    '                                 ng-focus=\"onItemFocus($index)\"\\n' +\n    '                                 ng-change=\"onChecked(item)\"\\n' +\n    '                                 ng-disabled=\"ngDisabled()\">\\n' +\n    '                    </md-checkbox>\\n' +\n    '                </div>\\n' +\n    '            </div>\\n' +\n    '            <div class=\"pip-checklist-text flex \" pip-cancel-drag=\"true\">\\n' +\n    '                <md-input-container md-no-float class=\"flex\" >\\n' +\n    '                    <textarea ng-model=\"item.text\"\\n' +\n    '                              name=\"{{\\'text\\' + $index}}\"\\n' +\n    '                              aria-label=\"TEXT\"\\n' +\n    '                              class=\"pip-text-checkbox\"\\n' +\n    '                              ng-focus=\"onItemFocus($index)\"\\n' +\n    '                              ng-change=\"onChangeItem($index)\"\\n' +\n    '                              ng-keydown=\"onTextareaKeyDown($event, $index, item)\"\\n' +\n    '                              placeholder=\"{{::\\'TEXT\\' | translate}}\"\\n' +\n    '                              id=\"{{\\'check-item-text-\\' + selected.id + \\'-\\' + $index}}\"\\n' +\n    '                              ng-disabled=\"ngDisabled()\">\\n' +\n    '                    </textarea>\\n' +\n    '                </md-input-container>\\n' +\n    '            </div>\\n' +\n    '            <div class=\"pip-checklist-button\"  pip-cancel-drag=\"true\">\\n' +\n    '                <md-button class=\"pip-icon-checklist-button md-icon-button\" md-ink-ripple\\n' +\n    '                           ng-click=\"onDeleteItem($index, item)\"\\n' +\n    '                           ng-disabled=\"ngDisabled()\"\\n' +\n    '                           tabindex=\"-1\"\\n' +\n    '                           ng-focus=\"onItemFocus($index)\"\\n' +\n    '                           ng-show=\"isSelectedItem($index)\"\\n' +\n    '                           aria-label=\"DELETE-ITEM\">\\n' +\n    '                    <md-icon class=\"text-grey\" md-svg-icon=\"icons:cross-circle\"></md-icon>\\n' +\n    '                </md-button>\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '\\n' +\n    '    <div id=\"{{\\'check-item-empty-\\' + selected.id}}\"\\n' +\n    '         class=\"pip-empty-text\"\\n' +\n    '         pip-drag=\"false\"\\n' +\n    '         pip-drop=\"true\"\\n' +\n    '         pip-drop-success=\"onDropComplete(checklistContent.length, $data, $event, selected.id)\">\\n' +\n    '        <div ng-class=\"{\\'put_place\\': selected.drag}\"></div>\\n' +\n    '    </div>\\n' +\n    '</div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipComposite.Templates');\n} catch (e) {\n  module = angular.module('pipComposite.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('checklist_view/checklist_view.html',\n    '<div ng-repeat=\"item in checklistContent track by $index\">\\n' +\n    '    <div class=\"pip-checklist-item layout-row layout-align-start-start\">\\n' +\n    '        <div class=\"pip-checklist-icon\">\\n' +\n    '            <md-checkbox  ng-model=\"item.checked\"\\n' +\n    '                          ng-click=\"onClick($event, item)\"\\n' +\n    '                          aria-label=\"COMPLETE\"\\n' +\n    '                          ng-disabled=\"ngDisabled()\">\\n' +\n    '            </md-checkbox>\\n' +\n    '        </div>\\n' +\n    '        <div class=\"pip-checklist-text flex\">\\n' +\n    '            <pip-markdown pip-text=\"item.text\"\\n' +\n    '                          pip-rebind=\"true\"\\n' +\n    '                          ng-disabled=\"true\">\\n' +\n    '            </pip-markdown>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '</div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipComposite.Templates');\n} catch (e) {\n  module = angular.module('pipComposite.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('composite_edit/composite_edit.html',\n    '<!--\\n' +\n    '@file Composite edit control content\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<div class=\"divider-top\">\\n' +\n    '    <div class=\"pip-composite-body\"\\n' +\n    '         ng-show=\"compositeContent.length != 0\"\\n' +\n    '         ng-class=\"{\\'drag-active\\': selected.drag}\">\\n' +\n    '\\n' +\n    '        <div class=\"pip-composite-item\"\\n' +\n    '             ng-repeat=\"obj in compositeContent track by obj.id\"\\n' +\n    '             ng-mousedown=\"onClick($event, $index, obj)\"\\n' +\n    '             ng-class=\"{\\'selected-content\\': isSelectedSection($index, obj),\\n' +\n    '                        \\'composite-animate\\': !obj.empty && compositeContent.length > 1}\"\\n' +\n    '             ng-keyup=\"onKeyUp($event)\"\\n' +\n    '             ng-keydown=\"onKeyDown($event, $index, obj)\"\\n' +\n    '             pip-drag=\"compositeContent.length > 1 && selected.drag\"\\n' +\n    '             pip-touch-delay=\"10\"\\n' +\n    '             pip-drag-data=\"obj\"\\n' +\n    '             pip-scroll-container=\"pipScrollContainer\"\\n' +\n    '             pip-drop=\"true\"\\n' +\n    '             pip-force-touch = \"true\"\\n' +\n    '             pip-drag-stop=\"onStop(selected.id)\"\\n' +\n    '             pip-drag-start=\"onStart(selected.id)\"\\n' +\n    '             pip-drop-success=\"onDropComplete($index, $data, $event, selected.id)\"\\n' +\n    '             id=\"{{\\'composite-item-\\' + selected.id + \\'-\\' + $index}}\">\\n' +\n    '\\n' +\n    '            <!--<div ng-class=\"{\\'putt_box\\': selected.drag}\"></div>-->\\n' +\n    '            <div class=\"putt_box\"></div>\\n' +\n    '            <div class=\"pip-section-header layout-row layout-align-start-center\"\\n' +\n    '                 ng-if=\"!obj.empty\">\\n' +\n    '                <div class=\"w38\"></div>\\n' +\n    '                <md-button class=\"md-icon-button md-icon-button-little icon-rearrange-btn no-ripple-container rm8 cursor-move\"\\n' +\n    '                           ng-if=\"!ngDisabled() && compositeContent.length > 1\"\\n' +\n    '                           pip-drag-handle\\n' +\n    '                           pip-mobile-mousedown=\"onDownDragg($event, obj)\"\\n' +\n    '                           pip-mobile-mouseup=\"onDraggEnd()\"\\n' +\n    '                           tabindex=\"-1\"\\n' +\n    '                           aria-label=\"COMPOSITE-DRAGG\"\\n' +\n    '                           ng-hide=\"compositeContent.length == 1\">\\n' +\n    '                    <md-icon class=\"composite-icon cursor-move\" md-svg-icon=\"icons:handle\"></md-icon>\\n' +\n    '                </md-button>\\n' +\n    '                <div>\\n' +\n    '                    <md-button class=\"md-icon-button md-icon-button-little rm8\"\\n' +\n    '                               ng-click=\"onDeleteItem($index)\"\\n' +\n    '                               ng-disabled=\"ngDisabled()\"\\n' +\n    '                               aria-label=\"COMPOSITE-DELETE\">\\n' +\n    '                        <md-icon class=\"composite-icon\" md-svg-icon=\"icons:cross\"></md-icon>\\n' +\n    '                    </md-button>\\n' +\n    '                </div>\\n' +\n    '            </div>\\n' +\n    '            <!--pip-prevent-drag-->\\n' +\n    '            <!-- for text -->\\n' +\n    '            <div class=\"pip-section-content rp24-flex lp24-flex tp16 bp16\"\\n' +\n    '                 ng-if=\"obj.type == \\'text\\'\" pip-cancel-drag=\"true\">\\n' +\n    '                <md-input-container class=\"p0 m0 w-stretch\" md-no-float>\\n' +\n    '                            <textarea ng-model=\"obj.text\" aria-label=\"text\"\\n' +\n    '                                      placeholder=\"{{ isFirst ? compositePlaceholder : \\'TEXT\\' | translate}}\"\\n' +\n    '                                      id=\"{{\\'composite-item-text-\\' + selected.id + \\'-\\' + $index}}\"\\n' +\n    '                                      ng-change=\"onContentChange(obj)\"\\n' +\n    '                                      pip-cancel-drag=\"true\"\\n' +\n    '                                      ng-disabled=\"ngDisabled()\">\\n' +\n    '                            </textarea>\\n' +\n    '                </md-input-container>\\n' +\n    '            </div>\\n' +\n    '            <!-- -->\\n' +\n    '            <div class=\"pip-section-content rp24-flex lp24-flex vp20\"\\n' +\n    '                 ng-if=\"obj.type == \\'pictures\\'\" pip-cancel-drag=\"true\">\\n' +\n    '                <pip-picture-list-edit class=\"w-stretch\"\\n' +\n    '                                       pip-cancel-drag=\"true\"\\n' +\n    '                                       pip-picture-ids=\"obj.pic_ids\"\\n' +\n    '                                       pip-changed=\"onContentChange(obj)\"\\n' +\n    '                                       pip-created=\"obj.pictures = $event.sender\"\\n' +\n    '                                       pip-cancel-drag=\"true\"\\n' +\n    '                                       pip-added-picture=\"addedContent\"\\n' +\n    '                                       ng-disabled=\"ngDisabled()\">\\n' +\n    '                </pip-picture-list-edit>\\n' +\n    '            </div>\\n' +\n    '            <!-- -->\\n' +\n    '            <div class=\"pip-section-content rp24-flex lp24-flex vp20\"\\n' +\n    '                 ng-if=\"obj.type == \\'documents\\'\" pip-cancel-drag=\"true\">\\n' +\n    '                <pip-document-list-edit class=\"w-stretch\"\\n' +\n    '                                        pip-documents=\"obj.docs\"\\n' +\n    '                                        pip-cancel-drag=\"true\"\\n' +\n    '                                        pip-changed=\"onContentChange(obj)\"\\n' +\n    '                                        pip-cancel-drag=\"true\"\\n' +\n    '                                        pip-created=\"obj.documents = $event.sender\"\\n' +\n    '                                        pip-added-document=\"addedContent\"\\n' +\n    '                                        ng-disabled=\"ngDisabled()\">\\n' +\n    '                </pip-document-list-edit>\\n' +\n    '            </div>\\n' +\n    '\\n' +\n    '            <div class=\"pip-section-content layout-row layout-align-start-center\"\\n' +\n    '                 ng-if=\"obj.type == \\'checklist\\'\" pip-cancel-drag=\"true\">\\n' +\n    '                <pip-checklist-edit pip-options=\"obj.checklist\"\\n' +\n    '                                    pip-draggable=\"isActiveChecklist(obj)\"\\n' +\n    '                                    pip-changed=\"onContentChange(obj)\"\\n' +\n    '                                    ng-disabled=\"ngDisabled()\"\\n' +\n    '                                    pip-scroll-container=\"{{pipScrollContainer}}\"\\n' +\n    '                                    pip-rebind=\"true\">\\n' +\n    '                </pip-checklist-edit>\\n' +\n    '            </div>\\n' +\n    '\\n' +\n    '            <div class=\"pip-section-content vp20 rp24-flex lp24-flex\"\\n' +\n    '                 ng-if=\"obj.type == \\'location\\'\" pip-cancel-drag=\"true\">\\n' +\n    '                <pip-location-edit class=\"pip-location-attachments w-stretch\"\\n' +\n    '                                   pip-location-name=\"obj.loc_name\"\\n' +\n    '                                   pip-location-pos=\"obj.loc_pos\"\\n' +\n    '                                   pip-cancel-drag=\"true\"\\n' +\n    '                                   pip-location-holder=\"pipLocationHolder\"\\n' +\n    '                                   pip-changed=\"onContentChange(obj)\"\\n' +\n    '                                   ng-disabled=\"ngDisabled()\">\\n' +\n    '                </pip-location-edit>\\n' +\n    '            </div>\\n' +\n    '            <!-- -->\\n' +\n    '            <div class=\"pip-section-content bp16-flex rp24-flex lp24-flex tp20\"\\n' +\n    '                 ng-if=\"obj.type == \\'time\\'\" pip-cancel-drag=\"true\">\\n' +\n    '                <pip-time-range-edit class=\"w-stretch\"\\n' +\n    '                               pip-start-date=\"obj.start\"\\n' +\n    '                               pip-end-date=\"obj.end\"\\n' +\n    '                               pip-size=\"$sizeGtSmall\"\\n' +\n    '                               pip-changed=\"onContentChange(obj)\"\\n' +\n    '                               ng-disabled=\"ngDisabled()\"\\n' +\n    '                               pip-start-label=\"{{ \\'COMPOSITE_START_TIME\\' | translate }}\"\\n' +\n    '                               pip-end-label=\"{{ \\'COMPOSITE_END_TIME\\' | translate }}\">\\n' +\n    '                </pip-time-range-edit>\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '        <div class=\"pip-composite-item w-stretch\"\\n' +\n    '             pip-drag=\"false\"\\n' +\n    '             pip-drop=\"true\"\\n' +\n    '             pip-drop-success=\"onDropComplete(compositeContent.length, $data, $event, selected.id)\"\\n' +\n    '             pip-drag-stop=\"onStop(selected.id)\"\\n' +\n    '             pip-drag-start=\"onStart(selected.id)\"\\n' +\n    '             id=\"{{\\'pip-composite-last-\\' + selected.id}}\">\\n' +\n    '\\n' +\n    '            <!--<div ng-class=\"{\\'putt_box\\': selected.drag}\"></div>-->\\n' +\n    '            <div class=\"putt_box\"></div>\\n' +\n    '            <div class=\"pip-section-content h24\" style=\"border: 0px!important;\">\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '</div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipComposite.Templates');\n} catch (e) {\n  module = angular.module('pipComposite.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('composite_summary/composite_summary.html',\n    '<div ng-repeat=\"item in compositeContent track by $index\">\\n' +\n    '\\n' +\n    '    <!-- for text -->\\n' +\n    '    <div class=\"pip-composite-text\" ng-if=\"item.type == \\'text\\' && item.text\">\\n' +\n    '        <pip-markdown pip-text=\"item.text\"\\n' +\n    '                      pip-line-count=\"{{textSize}}\"\\n' +\n    '                      pip-rebind=\"true\"\\n' +\n    '                      ng-disabled=\"true\">\\n' +\n    '        </pip-markdown>\\n' +\n    '    </div>\\n' +\n    '    <!-- for pictures -->\\n' +\n    '    <div ng-if=\"item.type == \\'pictures\\' && item.pic_ids.length > 0\"\\n' +\n    '         ng-class=\" compositeContent[$index - 1].type != \\'pictures\\' ?\\n' +\n    '                    compositeContent[$index + 1].type != \\'pictures\\' ? \\'tm16 bm16\\' : \\'tm16 bm0\\' :\\n' +\n    '                    compositeContent[$index + 1].type != \\'pictures\\' ? \\'tm8 bm16\\' : \\'tm8 bm0\\' \"\\n' +\n    '         class=\"pip-composite-pictures\">\\n' +\n    '        <pip-collage ng-if=\"rebind\"\\n' +\n    '                     pip-picture-ids=\"item.pic_ids\"\\n' +\n    '                     pip-unique-code=\"item.id\"\\n' +\n    '                     pip-multiple=\"true\"\\n' +\n    '                     pip-open=\"disableControl\"\\n' +\n    '                     pip-rebind=\"true\"\\n' +\n    '                     ng-disabled=\"disableControl\">\\n' +\n    '        </pip-collage>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <!-- for documents -->\\n' +\n    '    <div ng-if=\"item.type == \\'documents\\' && item.docs.length > 0\"\\n' +\n    '         class=\"pip-composite-documents layout-row flex\">\\n' +\n    '        <pip-document-list class=\"flex\"\\n' +\n    '                           pip-documents=\"item.docs\"\\n' +\n    '                           pip-rebind=\"true\"\\n' +\n    '                           pip-document-icon=\"true\"\\n' +\n    '                           pip-collapse=\"true\"\\n' +\n    '                           ng-disabled=\"disableControl\">\\n' +\n    '        </pip-document-list>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <!--for checklist -->\\n' +\n    '    <div ng-if=\"item.type == \\'checklist\\' && item.checklist.length > 0\"\\n' +\n    '         class=\"pip-composite-checklist\">\\n' +\n    '        <pip-checklist-view pip-options=\"item.checklist\"\\n' +\n    '                            pip-changed=\"onContentChange()\"\\n' +\n    '                            pip-rebind=\"true\"\\n' +\n    '                            pip-collapse=\"true\"\\n' +\n    '                            ng-disabled=\"disabledChecklist\">\\n' +\n    '        </pip-checklist-view>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <!--for location -->\\n' +\n    '    <div class=\"pip-composite-location layout-row layout-align-start-center flex\"\\n' +\n    '         ng-if=\"item.type == \\'location\\' && (item.loc_pos || item.loc_name)\">\\n' +\n    '\\n' +\n    '        <pip-location class=\"flex\"\\n' +\n    '                      pip-location-name=\"item.loc_name\"\\n' +\n    '                      pip-location-pos=\"item.loc_pos\"\\n' +\n    '                      pip-collapse=\"true\"\\n' +\n    '                      pip-show-location-icon=\"true\"\\n' +\n    '                      ng-disabled=\"disableControl\"\\n' +\n    '                      pip-rebind=\"true\">\\n' +\n    '        </pip-location>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <!-- for time -->\\n' +\n    '    <div class=\"pip-composite-time layout-row layout-align-start-center flex\"\\n' +\n    '         ng-if=\"item.type == \\'time\\' && (item.start || item.end)\">\\n' +\n    '\\n' +\n    '        <md-icon md-svg-icon=\"icons:time\" class=\"rm24 lm0\"></md-icon>\\n' +\n    '        <pip-time-range\\n' +\n    '                pip-start-date=\"item.start\"\\n' +\n    '                pip-end-date=\"item.end\"\\n' +\n    '                pip-rebind=\"true\"\\n' +\n    '                ng-disabled=\"disableControl\">\\n' +\n    '        </pip-time-range>\\n' +\n    '    </div>\\n' +\n    '</div>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipComposite.Templates');\n} catch (e) {\n  module = angular.module('pipComposite.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('composite_view/composite_view.html',\n    '<div ng-repeat=\"item in compositeContent track by $index\">\\n' +\n    '\\n' +\n    '    <!-- for text -->\\n' +\n    '    <div class=\"pip-composite-text lp24-flex rp24-flex\" ng-if=\"item.type == \\'text\\' && item.text\" ng-class=\"{\\'bm16\\': $last}\">\\n' +\n    '        <pip-markdown pip-text=\"item.text\"\\n' +\n    '                      pip-rebind=\"true\"\\n' +\n    '                      ng-disabled=\"true\">\\n' +\n    '        </pip-markdown>\\n' +\n    '    </div>\\n' +\n    '    <!-- for pictures -->\\n' +\n    '    <div ng-if=\"item.type == \\'pictures\\' && item.pic_ids.length > 0\"\\n' +\n    '         ng-class=\" compositeContent[$index - 1].type != \\'pictures\\' ?\\n' +\n    '                    compositeContent[$index + 1].type != \\'pictures\\' ? \\'tm16 bm16\\' : \\'tm16 bm0\\' :\\n' +\n    '                    compositeContent[$index + 1].type != \\'pictures\\' ? \\'tm8 bm16\\' : \\'tm8 bm0\\' \"\\n' +\n    '         class=\"pip-composite-pictures lp24-flex rp24-flex\">\\n' +\n    '        <pip-collage ng-if=\"rebind\"\\n' +\n    '                pip-picture-ids=\"item.pic_ids\"\\n' +\n    '                pip-unique-code=\"item.id\"\\n' +\n    '                pip-multiple=\"true\"\\n' +\n    '                pip-open=\"true\"\\n' +\n    '                pip-rebind=\"true\"\\n' +\n    '                ng-disabled=\"ngDisabled()\">\\n' +\n    '        </pip-collage>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <!-- for documents -->\\n' +\n    '    <div ng-if=\"item.type == \\'documents\\' && item.docs.length > 0\"\\n' +\n    '         class=\"pip-composite-documents layout-row layout-align-start-start flex\">\\n' +\n    '        <pip-document-list pip-documents=\"item.docs\"\\n' +\n    '                           pip-document-icon=\"true\"\\n' +\n    '                           pip-rebind=\"true\"\\n' +\n    '                           ng-disabled=\"ngDisabled()\">\\n' +\n    '        </pip-document-list>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <!--for checklist -->\\n' +\n    '    <div ng-if=\"item.type == \\'checklist\\' && item.checklist.length > 0\"\\n' +\n    '         class=\"pip-composite-checklist lp24-flex rp24-flex\">\\n' +\n    '        <pip-checklist-view pip-options=\"item.checklist\"\\n' +\n    '                            pip-changed=\"onContentChange()\"\\n' +\n    '                            pip-rebind=\"true\"\\n' +\n    '                            ng-disabled=\"isDisabled()\">\\n' +\n    '        </pip-checklist-view>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <!--for location -->\\n' +\n    '    <div class=\"pip-composite-location layout-row layout-align-start-start flex\"\\n' +\n    '         ng-if=\"item.type == \\'location\\' && (item.loc_pos || item.loc_name)\">\\n' +\n    '\\n' +\n    '        <pip-location class=\"flex\"\\n' +\n    '                      pip-location-name=\"item.loc_name\"\\n' +\n    '                      pip-location-pos=\"item.loc_pos\"\\n' +\n    '                      pip-show-location-icon=\"true\"\\n' +\n    '                      pip-collapse=\"false\"\\n' +\n    '                      ng-disabled=\"ngDisabled()\"\\n' +\n    '                      pip-rebind=\"true\">\\n' +\n    '        </pip-location>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <!-- for time -->\\n' +\n    '    <div class=\"pip-composite-time lp24-flex rp24-flex layout-row layout-align-start-center  flex\"\\n' +\n    '         ng-if=\"item.type == \\'time\\'\">\\n' +\n    '\\n' +\n    '        <md-icon md-svg-icon=\"icons:time\" class=\"lm0\"></md-icon>\\n' +\n    '        <pip-time-range\\n' +\n    '                pip-start-date=\"item.start\"\\n' +\n    '                pip-end-date=\"item.end\"\\n' +\n    '                pip-rebind=\"true\"\\n' +\n    '                ng-disabled=\"ngDisabled()\">\\n' +\n    '        </pip-time-range>\\n' +\n    '    </div>\\n' +\n    '</div>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipComposite.Templates');\n} catch (e) {\n  module = angular.module('pipComposite.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('composite_toolbar/composite_toolbar.html',\n    '<!--\\n' +\n    '@file Composite toolbar control content\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<div class=\"layout-row layout-align-start-start flex\">\\n' +\n    '    <md-button class=\"pip-composite-button\"\\n' +\n    '               ng-if=\"!emptyState\"\\n' +\n    '               ng-class=\"{ \\'remove-item\\': !emptyState ,\\n' +\n    '                                \\'new-item\\': !emptyState }\"\\n' +\n    '               ng-click=\"onAddItem(\\'text\\');\"\\n' +\n    '               aria-label=\"COMPOSITE-BUTTON-TEXT\"\\n' +\n    '               ng-disabled=\"ngDisabled()\">\\n' +\n    '        <md-icon class=\"icon-text-block\" md-svg-icon=\"icons:text\"></md-icon>\\n' +\n    '        <md-tooltip>{{::\\'TEXT\\'| translate}}</md-tooltip>\\n' +\n    '    </md-button>\\n' +\n    '    <md-button ng-if=\"toolbarButton.checklist\"\\n' +\n    '               ng-click=\"onAddItem(\\'checklist\\')\"\\n' +\n    '               ng-disabled=\"ngDisabled()\"\\n' +\n    '               class=\"pip-composite-button\"\\n' +\n    '               aria-label=\"COMPOSITE-BUTTON-CHECKLIST\">\\n' +\n    '        <md-icon class=\"icon-checkbox-on\" md-svg-icon=\"icons:checkbox-on\"></md-icon>\\n' +\n    '        <md-tooltip>{{::\\'CHECKLIST\\'| translate}}</md-tooltip>\\n' +\n    '    </md-button>\\n' +\n    '    <md-button ng-if=\"toolbarButton.picture\"\\n' +\n    '               ng-click=\"onAddItem(\\'pictures\\')\"\\n' +\n    '               ng-disabled=\"ngDisabled()\"\\n' +\n    '               class=\"pip-composite-button\"\\n' +\n    '               aria-label=\"COMPOSITE-BUTTON-PICTURES\">\\n' +\n    '        <md-icon class=\"icon-camera\" md-svg-icon=\"icons:camera\"></md-icon>\\n' +\n    '        <md-tooltip>{{::\\'PICTURE\\'| translate}}</md-tooltip>\\n' +\n    '    </md-button>\\n' +\n    '    <md-button ng-click=\"onAddItem(\\'documents\\')\"\\n' +\n    '               ng-if=\"toolbarButton.document\"\\n' +\n    '               ng-disabled=\"ngDisabled()\"\\n' +\n    '               class=\"pip-composite-button\"\\n' +\n    '               aria-label=\"COMPOSITE-BUTTON-DOCUMENTS\">\\n' +\n    '        <md-icon class=\"icon-document\" md-svg-icon=\"icons:document\"></md-icon>\\n' +\n    '        <md-tooltip>{{::\\'DOCUMENT\\'| translate}}</md-tooltip>\\n' +\n    '    </md-button>\\n' +\n    '    <md-button ng-click=\"onAddItem(\\'location\\')\"\\n' +\n    '               ng-if=\"toolbarButton.location\"\\n' +\n    '               ng-disabled=\"ngDisabled()\"\\n' +\n    '               class=\"pip-composite-button\"\\n' +\n    '               aria-label=\"COMPOSITE-BUTTON-LOCATIONS\">\\n' +\n    '        <md-icon class=\"icon-location\" md-svg-icon=\"icons:location\"></md-icon>\\n' +\n    '        <md-tooltip>{{::\\'LOCATION\\'| translate}}</md-tooltip>\\n' +\n    '    </md-button>\\n' +\n    '    <md-button ng-click=\"onAddItem(\\'time\\')\"\\n' +\n    '               ng-if=\"toolbarButton.event\"\\n' +\n    '               ng-disabled=\"ngDisabled()\"\\n' +\n    '               class=\"pip-composite-button\"\\n' +\n    '               aria-label=\"COMPOSITE-BUTTON-TIME\">\\n' +\n    '        <md-icon class=\"icon-time\" md-svg-icon=\"icons:time\"></md-icon>\\n' +\n    '        <md-tooltip>{{::\\'TIME\\'| translate}}</md-tooltip>\\n' +\n    '    </md-button>\\n' +\n    '\\n' +\n    '</div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipComposite.Templates');\n} catch (e) {\n  module = angular.module('pipComposite.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('content_switch/content_switch.html',\n    '<!--\\n' +\n    '@file Content switch control content\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<md-button ng-click=\"showPictures = !showPictures; onButtonClick(\\'pictures\\')\"\\n' +\n    '           aria-label=\"showPictures\"\\n' +\n    '           class=\"md-icon-button\"\\n' +\n    '           ng-show=\"showIconPicture\"\\n' +\n    '           ng-disabled=\"transaction.busy()\">\\n' +\n    '        <md-icon class=\"active-camera\"\\n' +\n    '                 ng-class=\"{ \\'active-camera\\': showPictures }\"\\n' +\n    '                 md-svg-icon=\"icons:camera\"></md-icon>\\n' +\n    '</md-button>\\n' +\n    '<md-button ng-click=\"showDocuments = !showDocuments; onButtonClick(\\'documents\\')\"\\n' +\n    '           aria-label=\"showDocuments\"\\n' +\n    '           class=\"md-icon-button\"\\n' +\n    '           ng-show=\"showIconDocument\"\\n' +\n    '           ng-disabled=\"transaction.busy()\">\\n' +\n    '    <md-icon ng-class=\"{ \\'active-document\\': showDocuments }\" md-svg-icon=\"icons:document\"></md-icon>\\n' +\n    '</md-button>\\n' +\n    '<md-button ng-click=\"showEvent = !showEvent; onButtonClick(\\'event\\')\"\\n' +\n    '           aria-label=\"showEvent\"\\n' +\n    '           class=\"md-icon-button\"\\n' +\n    '           ng-show=\"showIconEvent\"\\n' +\n    '           ng-disabled=\"transaction.busy()\">\\n' +\n    '    <md-icon ng-class=\"{ \\'active-time\\': showEvent }\" md-svg-icon=\"icons:time\"></md-icon>\\n' +\n    '</md-button>\\n' +\n    '<md-button ng-click=\"showLocation = !showLocation; onButtonClick(\\'location\\')\"\\n' +\n    '           aria-label=\"showLocation\"\\n' +\n    '           class=\"md-icon-button\"\\n' +\n    '           ng-show=\"showIconLocation\"\\n' +\n    '           ng-disabled=\"transaction.busy()\">\\n' +\n    '    <md-icon ng-class=\"{ \\'active-location\\': showLocation }\" md-svg-icon=\"icons:location\"></md-icon>\\n' +\n    '</md-button>');\n}]);\n})();\n","/**\r\n * @file Checklist edit control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * + Improve samples in sampler app\r\n * + Renamed to pip-checklist-edit and implement pip-checklist (pip-checklist-view) control\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipChecklistEdit\", ['pipCore', 'pipComposite.Templates']);\r\n\r\n    /**\r\n     * ngDisabled: '&',\r\n     * pipChanged: '=',\r\n     * pipDraggable: '=',\r\n     * pipOptions: '=',\r\n     * pipScrollContainer: '@'\r\n     */\r\n    thisModule.directive('pipChecklistEdit',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                replace: false,\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    pipChanged: '=',\r\n                    pipDraggable: '=',\r\n                    pipOptions: '=',\r\n                    pipScrollContainer: '@'\r\n                },\r\n                templateUrl: 'checklist_edit/checklist_edit.html',\r\n                controller: 'pipChecklistEditController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipChecklistEditController',\r\n        ['$scope', '$element', '$attrs', '$document', 'pipUtils', '$rootScope', function ($scope, $element, $attrs, $document,pipUtils, $rootScope) {\r\n\r\n            $scope.selected = {};\r\n            $scope.selected.index = 0;\r\n            $scope.selected.drag = $scope.pipDraggable;\r\n            $scope.selected.dragInit = $scope.pipDraggable;\r\n            $scope.selected.dragId = 0;\r\n            $scope.selected.id = now();\r\n            $scope.selected.isChanged = false;\r\n\r\n            generateList($scope.pipOptions);\r\n\r\n            $scope.onTextareaKeyDown = onTextareaKeyDown;\r\n            $scope.onAddItem = onAddItem;\r\n            $scope.onChangeItem = onChangeItem;\r\n            $scope.onClick = onClick;\r\n            $scope.onTextAreaClick = onTextAreaClick;\r\n            $scope.onDropComplete = onDropComplete;\r\n            $scope.onDeleteItem = onDeleteItem;\r\n            $scope.onChecked = onChecked;\r\n            $scope.updateContents = updateContents;\r\n            $scope.onItemFocus = onItemFocus;\r\n            $scope.onMove = onMove;\r\n            $scope.onStart = onStart;\r\n            $scope.onStop = onStop;\r\n            $scope.isDisabled = isDisabled;\r\n            $scope.onDownDragg = onDownDragg;\r\n\r\n            $scope.isSelectedItem = isSelectedItem;\r\n\r\n            // Watch for options changes\r\n            if (pipUtils.toBoolean($attrs.pipRebind)) {\r\n                $scope.$watchCollection('pipOptions', function (newValue) {\r\n                    if (!$scope.selected.isChanged) {\r\n                        generateList($scope.pipOptions);\r\n                    } else {\r\n                        $scope.selected.isChanged = false;\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (pipUtils.toBoolean($attrs.pipRebind)) {\r\n                $scope.$watchCollection('pipDraggable', function (newValue) {\r\n                    $scope.pipDraggable = newValue;\r\n                });\r\n            }\r\n\r\n            $scope.onChecklistChange = _.debounce(onChecklistChange , 200);\r\n\r\n            // Add class\r\n            $element.addClass('pip-checklist-edit');\r\n\r\n            return;\r\n\r\n            function getCaret(el) {\r\n                if (el.selectionStart) {\r\n                    return el.selectionStart;\r\n                } else if ($document.selection) {\r\n                    el.focus();\r\n\r\n                    var r = $document.selection.createRange();\r\n                    if (r == null) {\r\n                        return 0;\r\n                    }\r\n\r\n                    var re = el.createTextRange(),\r\n                        rc = re.duplicate();\r\n                    re.moveToBookmark(r.getBookmark());\r\n                    rc.setEndPoint('EndToStart', re);\r\n\r\n                    return rc.text.length;\r\n                }\r\n                return 0;\r\n            }\r\n\r\n            function isDisabled() {\r\n                if ($scope.ngDisabled) {\r\n                    return $scope.ngDisabled();\r\n                } else {\r\n                    return false;\r\n                }\r\n            };\r\n\r\n            function onItemFocus(index) {\r\n                if (isDisabled()) return;\r\n                $scope.selected.index = index;\r\n            };\r\n\r\n            function isSelectedItem(index) {\r\n                var empty;\r\n                try {\r\n                    empty = $scope.checklistContent[index].empty;\r\n                } catch (err) {\r\n                    empty = true;\r\n                }\r\n\r\n                return $scope.selected.index == index && $scope.pipDraggable && !empty;\r\n            };\r\n\r\n            function setSelectionRange(input, selectionStart, selectionEnd) {\r\n                if (input.setSelectionRange) {\r\n                    input.focus();\r\n                    input.setSelectionRange(selectionStart, selectionEnd);\r\n                }\r\n                else if (input.createTextRange) {\r\n                    var range = input.createTextRange();\r\n                    range.collapse(true);\r\n                    range.moveEnd('character', selectionEnd);\r\n                    range.moveStart('character', selectionStart);\r\n                    range.select();\r\n                }\r\n            }\r\n\r\n            function setCaretToPos (input, pos) {\r\n                setSelectionRange(input, pos, pos);\r\n            }\r\n\r\n            function onTextareaKeyDown($event, index, item) {\r\n                if (isDisabled()) return;\r\n                if ($scope.selected.index == -1) return;\r\n\r\n\r\n                if ($event && $event.target) {\r\n                    // calculate caret position\r\n                    var posCaret = getCaret($event.target);\r\n                    // calculate textarea length\r\n                    if ($event.target.value !== undefined)\r\n                        var textareaLength = $event.target.value.length;\r\n                }\r\n                \r\n                // delete empty item after backspace or del\r\n                if ($scope.selected.index > 0 && item.text != '' && posCaret == 0 && $event.keyCode == 8  && !$event.ctrlKey && !$event.shiftKey) {\r\n                    if (!item.empty) {\r\n                        var position = $scope.checklistContent[$scope.selected.index - 1].text.length;\r\n                        $scope.checklistContent[$scope.selected.index - 1].text = $scope.checklistContent[$scope.selected.index - 1].text + item.text;\r\n                        $scope.selected.index -= 1;\r\n                        $scope.checklistContent.splice($scope.selected.index + 1, 1);\r\n                        $scope.onChecklistChange();\r\n                        \r\n                        setFocus($scope.selected.index, position);\r\n                    }\r\n                    if ($event) $event.stopPropagation();\r\n                    return false;\r\n                }\r\n                \r\n                if (item.text == '' && ($event.keyCode == 8 || $event.keyCode == 46) && !$event.ctrlKey && !$event.shiftKey) {\r\n                    if (!item.empty) onDeleteItem(index, item);\r\n                    if ($event) $event.stopPropagation();\r\n                    return false;\r\n                }\r\n\r\n                //press enter - create new item\r\n                if (($event.keyCode == 13 || $event.keyCode == 45) && !$event.ctrlKey && !$event.shiftKey) {  // insert\r\n                    if (posCaret !== undefined && posCaret == 0) {\r\n                        // add item before current item\r\n                        if ($scope.selected.index > 0) addItem('', $scope.selected.index - 1);\r\n                        else  {\r\n                            $scope.selected.index = -1;\r\n                            addItem('', -1);\r\n                        }\r\n                        if ($event) $event.stopPropagation();\r\n                        if ($event) $event.preventDefault();\r\n\r\n                        return false;\r\n                    }\r\n\r\n                    if (textareaLength && posCaret && textareaLength == posCaret) {\r\n                        // add item after current item\r\n                        if (!item.empty) {\r\n                            addItem('', $scope.selected.index);\r\n                        }\r\n                        if ($event) $event.stopPropagation();\r\n                        if ($event) $event.preventDefault();\r\n                        return false;\r\n                    } \r\n                    \r\n                     if (textareaLength && posCaret && textareaLength > posCaret) {\r\n                        // divide current item \r\n                        if (!item.empty) {\r\n                            var valueCurrent, newItem;\r\n                            valueCurrent = item.text.substring(0, posCaret);\r\n                            newItem = item.text.substring(posCaret);\r\n                            item.text = valueCurrent;\r\n                            addItem(newItem, $scope.selected.index);\r\n                            \r\n                            setFocus($scope.selected.index, 0);\r\n                        }\r\n                        if ($event) $event.stopPropagation();\r\n                        if ($event) $event.preventDefault();\r\n                        return false;\r\n                    } \r\n\r\n                    if ($event) $event.preventDefault();\r\n                    return false;\r\n                }\r\n\r\n                // move cursor up\r\n                if ((posCaret === 0 || posCaret == textareaLength) && $scope.checklistContent.length > 1 && $event.keyCode == 38 && !$event.ctrlKey && !$event.shiftKey) {  // insert\r\n                    if ($event) $event.stopPropagation();\r\n                    if ($event) $event.preventDefault();\r\n\r\n                    if (posCaret !== undefined && textareaLength !== undefined && posCaret == 0) {\r\n                        // move to new item\r\n                        if ($scope.selected.index == 0) {\r\n                            $scope.selected.index = $scope.checklistContent.length - 1;\r\n                            var position =  $scope.checklistContent[$scope.selected.index].text.length;\r\n                            setFocus($scope.selected.index, position);\r\n                        } else {\r\n                            $scope.selected.index -= 1;\r\n                            var position =  $scope.checklistContent[$scope.selected.index].text.length;\r\n                            setFocus($scope.selected.index, position);\r\n                        }\r\n                    } else {\r\n                        // move caret to text end\r\n                        setFocus($scope.selected.index, 0);\r\n                    }\r\n\r\n                    return false;\r\n                }\r\n\r\n                // move cursor down\r\n                if ((posCaret === 0 || posCaret == textareaLength) && $scope.checklistContent.length > 1 && $event.keyCode == 40 && !$event.ctrlKey && !$event.shiftKey) {  // insert\r\n                    if ($event) $event.stopPropagation();\r\n                    if ($event) $event.preventDefault();\r\n\r\n                    if (posCaret !== undefined && textareaLength !== undefined && posCaret == textareaLength) {\r\n                        // move to new item\r\n                        if ($scope.selected.index >= $scope.checklistContent.length - 1) {\r\n                            $scope.selected.index = 0;\r\n                            setFocus($scope.selected.index, 0);\r\n                        } else {\r\n                            $scope.selected.index += 1;\r\n                            setFocus($scope.selected.index, 0);\r\n                        }\r\n                    } else {\r\n                        // move caret to text end\r\n                        setFocus($scope.selected.index, textareaLength);\r\n                    }\r\n\r\n                    return false;\r\n                }\r\n\r\n                // delete item\r\n                if (!item.empty && $event.keyCode == 46 && $event.ctrlKey && !$event.shiftKey) {\r\n                    if ($event) $event.stopPropagation();\r\n                    if ($event) $event.preventDefault();\r\n                    onDeleteItem(index, item);\r\n                    return false;\r\n                }\r\n\r\n                // check/uncheck item\r\n                if ($event.keyCode == 32 && $event.ctrlKey && !$event.shiftKey) {\r\n                    if ($event) $event.stopPropagation();\r\n                    if ($event) $event.preventDefault();\r\n                    if (item) {\r\n                        item.checked = !item.checked\r\n                        $scope.onChecklistChange();\r\n                    }\r\n                    return false;\r\n                }\r\n            }\r\n\r\n\r\n            function onAddItem() {\r\n                addItem('', $scope.selected.index - 1);\r\n            };\r\n\r\n            function onChangeItem(index) {\r\n                if (index > -1 && $scope.checklistContent[index] && $scope.checklistContent[index].empty) {\r\n                    if ($scope.checklistContent[index].empty) {\r\n                        $scope.checklistContent[index].empty = false;\r\n                        $scope.checklistContent.push(getNewItem('', true));\r\n                    }\r\n                }\r\n                $scope.onChecklistChange();\r\n            };\r\n\r\n            function onClick($event, index) {\r\n                if (isDisabled()) return;\r\n                $scope.selected.index = index;\r\n\r\n               // if ($event) $event.preventDefault();\r\n            };\r\n\r\n            function onTextAreaClick($event, index) {\r\n                if (isDisabled()) return;\r\n                $scope.selected.index = index;\r\n              //  if ($event) $event.stopPropagation();\r\n            };\r\n\r\n            function onDropComplete(placeIndex, obj, event, componentId) {\r\n                if ($scope.selected.id != componentId) return;\r\n                if (!$scope.selected.drag) return;\r\n                var index = placeIndex;\r\n\r\n                var tmpIndex = $scope.selected.index;\r\n\r\n                var checklist = _.cloneDeep($scope.checklistContent);\r\n\r\n                if (!(tmpIndex == 0 && placeIndex == 1)) {\r\n                    if (tmpIndex > index) {\r\n                        if (index > checklist.length - 1) index = checklist.length - 1;\r\n                        // move up\r\n                        for (var i = 0; i < tmpIndex - index; i++) {\r\n                            checklist[tmpIndex - i] = checklist[tmpIndex - i - 1];\r\n                        }\r\n                        checklist[index] = obj;\r\n                    }\r\n                    if (tmpIndex < index) {\r\n                        index -= 1;\r\n                        //move down\r\n                        for (var i = 0; i < index - tmpIndex; i++) {\r\n                            checklist[tmpIndex + i] = checklist[tmpIndex + i + 1];\r\n                        }\r\n                        checklist[index] = obj;\r\n                    }\r\n\r\n                    $scope.selected.index = index;\r\n                }\r\n\r\n                $scope.checklistContent = checklist;\r\n\r\n                $scope.onChecklistChange();\r\n            };\r\n\r\n            function onMove() {\r\n                setWidth();\r\n                $scope.isWidth = true;\r\n            };\r\n\r\n\r\n            function onStop(id) {\r\n                setTimeout(function () {\r\n                    $scope.selected.drag = $scope.selected.dragInit;\r\n                    $scope.selected.dragId = 0;\r\n                    $scope.$apply();\r\n                },  50);\r\n\r\n                if($scope.isWidth) {\r\n                    setWidth100();\r\n                    $scope.isWidth  = false;\r\n                }\r\n            };\r\n\r\n            function onStart(id) {\r\n                $scope.selected.isChanged = true;\r\n                if (id && id != $scope.selected.dragId) $scope.selected.drag = false;\r\n            };\r\n\r\n            function onDownDragg(item) {\r\n                if ($scope.pipDraggable && $scope.checklistContent.length > 2 && !item.empty) {\r\n                    $rootScope.$broadcast('onChecklistDrag');\r\n                    $scope.selected.dragId = $scope.selected.id;\r\n                }\r\n            };\r\n            \r\n            function onDeleteItem(index, item) {\r\n              \r\n                if ($scope.checklistContent.length == 1) {\r\n                    $scope.checklistContent[0].text = '';\r\n                    $scope.checklistContent[0].checked = false;\r\n                    $scope.checklistContent[0].empty = true;\r\n                    $scope.selected.index = 0;\r\n                } else {\r\n                    if (index >= 0 && index <= $scope.checklistContent.length)\r\n                        $scope.checklistContent.splice(index, 1);\r\n                    else return;\r\n                }\r\n\r\n                if ($scope.selected.index >= $scope.checklistContent.length)\r\n                    $scope.selected.index = $scope.checklistContent.length - 1;\r\n\r\n                setFocus($scope.selected.index, 0);\r\n                \r\n                $scope.onChecklistChange();\r\n            };\r\n\r\n            function onChecked(item) {\r\n                $scope.onChecklistChange();\r\n            };\r\n\r\n            function updateContents() {\r\n                $scope.selected.isChanged = true;\r\n                var content = [], i;\r\n                for (i = 0; i < $scope.checklistContent.length; i++) {\r\n                    if ($scope.checklistContent[i] && !$scope.checklistContent[i].empty) content.push({\r\n                        checked: $scope.checklistContent[i].checked,\r\n                        text: $scope.checklistContent[i].text\r\n                    })\r\n                }\r\n                $scope.pipOptions = content;\r\n            };\r\n\r\n            function onChecklistChange() {\r\n                updateContents();\r\n                if ($scope.pipChanged) {\r\n                    $scope.pipChanged();\r\n                }\r\n            };\r\n\r\n            function setFocus(index, toPos) {\r\n                if (index > -1) {\r\n                    setTimeout(function () {\r\n                        var nextElement = angular.element('#check-item-text-' + $scope.selected.id + '-' + index);\r\n                        if (nextElement) {\r\n                            nextElement.focus();\r\n                            if (toPos !== undefined && nextElement[0]) setCaretToPos(nextElement[0], toPos);\r\n                        }\r\n                    },  50);\r\n                }\r\n            };\r\n\r\n            function addItem(text, index) {\r\n                var newItem = getNewItem(text, false);\r\n                if (index > -1) $scope.selected.index = index;\r\n\r\n                if ($scope.checklistContent.length < 2) {\r\n                    $scope.checklistContent.unshift(newItem);\r\n                }\r\n                else {\r\n                    $scope.checklistContent.splice($scope.selected.index + 1, 0, newItem);\r\n                }\r\n                $scope.selected.index += 1;\r\n                setFocus($scope.selected.index);\r\n\r\n                $scope.onChecklistChange();\r\n            }\r\n\r\n            function getNewItem(text, isEmpty) {\r\n                return {\r\n                    checked: false,\r\n                    text: text || '',\r\n                    empty: isEmpty\r\n                }\r\n            };\r\n\r\n            function now(){\r\n                return +new Date;\r\n            }\r\n\r\n            function clearList() {\r\n                $scope.selected.index = 0;\r\n                $scope.checklistContent = [];\r\n                // push empty item\r\n                $scope.checklistContent.push(getNewItem('', true));\r\n            };\r\n\r\n            function generateList(content) {\r\n                if (!content ||  content.length < 1) {\r\n                    clearList();\r\n                } else {\r\n                    $scope.checklistContent = [];\r\n                    _.each(content, function(item){\r\n                        $scope.checklistContent.push(item);\r\n                    });\r\n                    // push empty item\r\n                    $scope.checklistContent.push(getNewItem('', true));\r\n                }\r\n            };\r\n\r\n            function setWidth100() {\r\n                var element = angular.element('#check-item-' + + $scope.selected.id + '-' + $scope.selected.index);\r\n                element.css( \"width\", 'none');\r\n                element.css( \"max-width\", 'none');\r\n            };\r\n\r\n            function setWidth() {\r\n                if ($scope.isWidth) return;\r\n\r\n                var elementEtalon = angular.element('#check-item-empty-' + $scope.selected.id);\r\n                var value = elementEtalon.width();\r\n                var element = angular.element('#check-item-' + $scope.selected.id + '-' + $scope.selected.index);\r\n                if (element) {\r\n                    element.css(\"width\", value + 'px');\r\n                    element.css(\"max-width\", value + 'px');\r\n                }\r\n            };\r\n\r\n        }]\r\n    );\r\n\r\n})();","/**\r\n * @file Checklist view control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipChecklistView\", ['pipCore', 'pipComposite.Templates']);\r\n\r\n    thisModule.directive('pipChecklistView',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                replace: false,\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    pipChanged: '&',\r\n                    pipOptions: '='\r\n                },\r\n                templateUrl: 'checklist_view/checklist_view.html',\r\n                controller: 'pipChecklistViewController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipChecklistViewController',\r\n        ['$scope', '$element', '$attrs', 'pipUtils', function ($scope, $element, $attrs, pipUtils) {\r\n\r\n            $scope.disableControl = pipUtils.toBoolean($scope.ngDisabled()) != false;\r\n            $scope.rebind = pipUtils.toBoolean($attrs.pipRebind);\r\n            $scope.selected = {};\r\n            $scope.selected.isChanged = false;\r\n\r\n            generateList($scope.pipOptions);\r\n\r\n            // Add class\r\n            $element.addClass('pip-checklist-view');\r\n\r\n            // Watch for options changes\r\n            if (pipUtils.toBoolean($attrs.pipRebind)) {\r\n                $scope.$watchCollection('pipOptions', function (newValue) {\r\n                    if (!$scope.selected.isChanged) {\r\n                        generateList($scope.pipOptions);\r\n                    } else {\r\n                        $scope.selected.isChanged = false;\r\n                    }\r\n                });\r\n            }\r\n\r\n            $scope.updateContents = updateContents;\r\n            $scope.onClick = onClick;\r\n\r\n            return;\r\n\r\n            function updateContents() {\r\n                $scope.selected.isChanged = true;\r\n                $scope.pipOptions = $scope.checklistContent;\r\n            };\r\n\r\n            function onChecklistChange() {\r\n                updateContents();\r\n                if ($scope.pipChanged) {\r\n                    $scope.pipChanged();\r\n                }\r\n            };\r\n\r\n            function clearList() {\r\n                $scope.checklistContent = [];\r\n            };\r\n\r\n            function generateList(content) {\r\n                if (!content ||  content.length < 1) {\r\n                    clearList();\r\n                    return;\r\n                } else {\r\n                    $scope.checklistContent = [];\r\n                    _.each(content, function(item){\r\n                        $scope.checklistContent.push(item);\r\n                    });\r\n                }\r\n            };\r\n\r\n            function onClick($event, item) {\r\n                if ($event) $event.stopPropagation();\r\n                if ($scope.ngDisabled && $scope.ngDisabled()) return;\r\n\r\n                onChecklistChange();\r\n            };\r\n\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Composite edit control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipCompositeEdit\", [\r\n        'pipCore', 'pipDocuments', 'pipLocations', 'pipPictures', 'pipComposite.Templates']);\r\n\r\n    thisModule.config(['pipTranslateProvider', function(pipTranslateProvider) {\r\n        pipTranslateProvider.translations('en', {\r\n            'COMPOSITE_TITLE': 'What\\'s on your mind?',\r\n            'COMPOSITE_PLACEHOLDER': 'Type text ...',\r\n            'COMPOSITE_START_TIME': 'Start time',\r\n            'COMPOSITE_END_TIME': 'End time'\r\n        });\r\n        pipTranslateProvider.translations('ru', {\r\n            'COMPOSITE_TITLE': 'Что у вас на уме?',\r\n            'COMPOSITE_PLACEHOLDER': 'Введите текст ...',\r\n            'COMPOSITE_START_TIME': 'Время начала',\r\n            'COMPOSITE_END_TIME': 'Время окончания'\r\n        });\r\n    }]);\r\n\r\n    thisModule.directive('pipCompositeEdit',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                replace: false,\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    pipChanged: '&',\r\n                    pipContents: '=',\r\n                    compositeId: '=pipCompositeId',\r\n                    pipCompositePlaceholder: '=',\r\n                    pipScrollContainer: '@',\r\n                    pipAddedContent: '&'\r\n                },\r\n                templateUrl: 'composite_edit/composite_edit.html',\r\n                controller: 'pipCompositeEditController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipCompositeEditController',\r\n        ['$scope', '$element', '$attrs', '$rootScope', 'pipUtils', 'pipTranslate', '$document', function ($scope, $element, $attrs, $rootScope, pipUtils, pipTranslate, $document) {\r\n\r\n            var CONTENT_TYPES = ['time', 'text', 'pictures', 'documents', 'checklist', 'location'];\r\n\r\n            $scope.selected = {};\r\n            $scope.selected.id = now();\r\n            $scope.selected.index = 0;\r\n            $scope.selected.drag = true;\r\n            $scope.selected.dragId = 0;\r\n\r\n            $scope.selected.isChanged = false;\r\n            $scope.toolbarButton = {};\r\n            $scope.rebind = pipUtils.toBoolean($attrs.pipRebind);\r\n            $scope.disableControl = pipUtils.toBoolean($scope.ngDisabled()) != false;\r\n            $scope.addedContent = pipUtils.toBoolean($scope.pipAddedContent()) == true;\r\n\r\n            generateList($scope.pipContents);\r\n            setPlaceholder();\r\n\r\n            $rootScope.$on('pipAddCompositeItem', function(event, args) {\r\n                if ($scope.compositeId) {\r\n                    if (args.id && args.id == $scope.compositeId) addItem(args.type);\r\n                } else addItem(args.type);\r\n            });\r\n\r\n            // Watch for options changes\r\n            if (pipUtils.toBoolean($attrs.pipRebind)) {\r\n                $scope.$watchCollection('pipContents', function (newValue, oldValue) {\r\n                    if (!$scope.selected.isChanged || ($scope.pipContents\r\n                        && $scope.pipContents.length != $scope.compositeContent.length)) {\r\n                        generateList($scope.pipContents);\r\n                        $scope.selected.isChanged = false;\r\n                    }\r\n                });\r\n\r\n                $scope.$watch('pipCompositePlaceholder', function (newValue, oldValue) {\r\n                    if ( newValue !== oldValue ) {\r\n                        setPlaceholder();\r\n                    }\r\n                });\r\n            }\r\n\r\n            $element.addClass('pip-composite-edit');\r\n\r\n            $scope.onDeleteItem = onDeleteItem;\r\n            $scope.onContentChange = onContentChange;\r\n            $scope.isSelectedSection = isSelectedSection;\r\n            $scope.onClick = onClick;\r\n            $scope.onDownDragg = onDownDragg;\r\n            $scope.onDraggEnd = onDraggEnd;\r\n            $scope.onDropComplete = onDropComplete;\r\n            $scope.onKeyUp = onKeyUp;\r\n            $scope.onKeyDown = onKeyDown;\r\n            $scope.onStart = onStart;\r\n            $scope.onStop = onStop;\r\n\r\n            $scope.isActiveChecklist = isActiveChecklist;\r\n\r\n            $rootScope.$on('onChecklistDrag', function () {\r\n                $scope.selected.drag = false;\r\n                setTimeout(function () {\r\n                    $scope.selected.drag = false;\r\n                    $scope.$apply();\r\n                },  0);\r\n            });\r\n\r\n            $rootScope.$on('focusedComposite', function () {\r\n                if ($scope.isFirst) {\r\n                    setTimeout(function () {\r\n                        var nextElement = angular.element('#composite-item-text-' + $scope.selected.id + '-0');\r\n                        if (nextElement && !nextElement.is(':focus')) nextElement.focus();\r\n                    },  50);\r\n                }\r\n            });\r\n\r\n            $scope.onCompositeChange = _.debounce(onCompositeChange , 200);\r\n\r\n            return;\r\n\r\n            function isActiveChecklist(obj) {\r\n                //return obj.id == $scope.selected.index  && !$scope.selected.drag;\r\n                return obj.id == $scope.selected.index;\r\n            };\r\n\r\n            function updateContents() {\r\n                $scope.selected.isChanged = true;\r\n                $scope.pipContents = $scope.compositeContent;\r\n            };\r\n\r\n            function getParentIndex(el) {\r\n                if (el.length < 1) return null;\r\n                var elParent = el.parent();\r\n                if (elParent[0] && elParent[0].id && elParent[0].id.indexOf('composite-item-' + $scope.selected.id) > -1) {\r\n                    var strs = elParent[0].id.split('-');\r\n\r\n                    var parentIndex = parseInt(strs[strs.length - 1], 10);\r\n                    return parentIndex;\r\n                } else return getParentIndex(elParent);\r\n            };\r\n\r\n            function onKeyUp($event) {\r\n                if ($event.keyCode == 9) {\r\n                    setTimeout(function () {\r\n                        var focusedElement = angular.element($document[0].activeElement);\r\n                        var parentIndex = getParentIndex(focusedElement);\r\n                        if (parentIndex != null) $scope.selected.index = parentIndex;\r\n                        $scope.$apply($scope.selected.index = $scope.compositeContent[parentIndex].id);\r\n                    },  50);\r\n                }\r\n            };\r\n\r\n            function onKeyDown($event, index, item) {\r\n                if ($scope.ngDisabled()) return;\r\n                // delete item\r\n                if (item && !item.empty && $event.keyCode == 46 && !$event.ctrlKey && $event.shiftKey) {\r\n                    if ($event) $event.stopPropagation();\r\n                    if ($event) $event.preventDefault();\r\n                    if (index > -1) {\r\n                        onDeleteItem(index);\r\n                    }\r\n\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            function onCompositeChange() {\r\n                updateContents();\r\n                if ($scope.pipChanged) $scope.pipChanged();\r\n            };\r\n\r\n            function onDeleteItem(index) {\r\n                if (index < 0 || $scope.compositeContent.length == 0) return;\r\n\r\n                // delete last element in composite\r\n                if ($scope.compositeContent.length == 1) {\r\n                    $scope.compositeContent[0] = {\r\n                        empty: true,\r\n                        id: getId(),\r\n                        type: 'text',\r\n                        text: '', docs: [], pic_ids: [], loc_pos: null, loc_name: '',\r\n                        start: null, end: null, checklist: []\r\n                    };\r\n                    $scope.selected.index = $scope.compositeContent[0].id;\r\n                    onSelect(0);\r\n                    $scope.isFirst = true;\r\n                    setToolbar();\r\n                } else {\r\n                    if (index >= 0 && index < $scope.compositeContent.length)\r\n                        $scope.compositeContent.splice(index, 1);\r\n\r\n                    if (index == $scope.compositeContent.length)\r\n                        $scope.selected.index = $scope.compositeContent[$scope.compositeContent.length - 1].id;\r\n                    else\r\n                        $scope.selected.index = $scope.compositeContent[index].id;\r\n\r\n                    onSelect();\r\n                }\r\n\r\n                setToolbar();\r\n                $scope.onCompositeChange();\r\n            };\r\n\r\n            function onContentChange(obj) {\r\n                if (obj && obj.empty && obj.text) {\r\n                    obj.empty = false;\r\n                    $scope.isFirst = false;\r\n                    setToolbar();\r\n                }\r\n                if (!$scope.ngDisabled()) $scope.onCompositeChange();\r\n            };\r\n\r\n            function isSelectedSection(index, obj) {\r\n                return $scope.selected.index == obj.id && !obj.empty;// && $scope.compositeContent.length > 1;\r\n            };\r\n\r\n            function onDraggEnd() {\r\n                $scope.selected.drag = true;\r\n            };\r\n\r\n            function onStart(id) {\r\n                if (id && id != $scope.selected.dragId) $scope.selected.drag = false;\r\n            };\r\n\r\n            function onStop(id) {\r\n                setTimeout(function () {\r\n                    $scope.selected.drag = true;\r\n                    $scope.selected.dragId = 0;\r\n                    $scope.$apply();\r\n                },  500);\r\n            };\r\n\r\n            function onDownDragg($event, obj) {\r\n                if ($scope.ngDisabled && $scope.ngDisabled()) return;\r\n                $scope.selected.dragId = $scope.selected.id;\r\n                $scope.selected.drag = true;\r\n                $scope.selected.index = obj.id;\r\n            };\r\n\r\n            function onClick($event, index, obj) {\r\n                if ($scope.ngDisabled && $scope.ngDisabled()) return;\r\n                $scope.selected.event = 'onClick';\r\n                if ($event && $event.target && $event.target.tagName &&\r\n                    ($event.target.tagName == 'INPUT' || $event.target.tagName == 'TEXTAREA' )) {\r\n                    $scope.selected.index = obj.id;\r\n                    return;\r\n                }\r\n\r\n                if ( $scope.selected.index == obj.id && obj.type == 'checklist' && obj.checklist.length > 0) return;\r\n                if ( $scope.selected.index == obj.id && obj.type == 'location' ) return;\r\n\r\n                $scope.selected.index = obj.id;\r\n                onSelect();\r\n            };\r\n\r\n            function onDropComplete(placeIndex, obj, event, componentId) {\r\n                if (componentId != $scope.selected.id || !obj || !obj.type) {\r\n                    $scope.compositeContent = _.cloneDeep($scope.pipContents);\r\n                    return;\r\n                }\r\n\r\n                var index = placeIndex;\r\n                var tmpIndex = _.findIndex($scope.compositeContent, {id: obj.id}); //$scope.selected.index});\r\n\r\n                if (!(tmpIndex == 0 && placeIndex == 1)) {\r\n                    if (tmpIndex > index) {\r\n                        if (index > $scope.compositeContent.length - 1) index = $scope.compositeContent.length - 1;\r\n                        // move up\r\n                        for (var i = 0; i < tmpIndex - index; i++) {\r\n                            $scope.compositeContent[tmpIndex - i] = $scope.compositeContent[tmpIndex - i - 1];\r\n                        }\r\n                        $scope.compositeContent[index] = obj;\r\n                    }\r\n                    if (tmpIndex < index) {\r\n                        index -= 1;\r\n                        //move down\r\n                        for (var i = 0; i < index - tmpIndex; i++) {\r\n                            $scope.compositeContent[tmpIndex + i] = $scope.compositeContent[tmpIndex + i + 1];\r\n                        }\r\n                        $scope.compositeContent[index] = obj;\r\n                    }\r\n                    $scope.selected.index = $scope.compositeContent[index].id;\r\n                }\r\n\r\n                onSelect();\r\n                $scope.onCompositeChange();\r\n            };\r\n\r\n            function onSelect(index) {\r\n                if (!index) index = _.findIndex($scope.compositeContent, {id: $scope.selected.index});\r\n                if (index < 0) return;\r\n\r\n                var item = $scope.compositeContent[index];\r\n                if (_.isEmpty(item)) return;\r\n\r\n                switch (item.type) {\r\n                    //case 'text':\r\n                    //        setTimeout(function () {\r\n                    //            var nextElement = angular.element('#composite-item-text-' + $scope.selected.id + '-' + index);\r\n                    //            //var nextElement = angular.element('#composite-item-text-' + $scope.selected.id + '-' + $scope.selected.index);\r\n                    //            if (nextElement && !nextElement.is(':focus')) nextElement.focus();\r\n                    //            //$scope.selected.stopKey = false;\r\n                    //        },  50);\r\n                    //    break;\r\n                    case 'pictures':\r\n                            setTimeout(function () {\r\n                                var nextElement = angular.element(\r\n                                    '#composite-item-' + $scope.selected.id + '-' + index + ' button.pip-picture-upload');\r\n                                if (nextElement && !nextElement.is(':focus')) nextElement.focus();\r\n                                //$scope.selected.stopKey = false;\r\n                            },  50);\r\n                        break;\r\n                    case 'documents':\r\n                            setTimeout(function () {\r\n                                var nextElement = angular.element(\r\n                                    '#composite-item-' + $scope.selected.id + '-' + index + ' button.pip-document-upload');\r\n                                if (nextElement && !nextElement.is(':focus')) nextElement.focus();\r\n                                //$scope.selected.stopKey = false;\r\n                            },  50);\r\n                        break;\r\n                    //case 'checklist':\r\n                    //        setTimeout(function () {\r\n                    //            var nextElement = angular.element(\r\n                    //                '#composite-item-' + $scope.selected.id + '-' + index + ' textarea[id^=\\'empty-item-\\'');\r\n                    //            if (nextElement && !nextElement.is(':focus')) nextElement.focus();\r\n                    //            //$scope.selected.stopKey = false;\r\n                    //        },  50);\r\n                    //    break;\r\n                    case 'location':\r\n                        setTimeout(function () {\r\n                            var nextElement = angular.element(\r\n                                '#composite-item-' + $scope.selected.id + '-' + index + ' .pip-location-empty  button');\r\n                            if (nextElement && !nextElement.is(':focus')) nextElement.focus();\r\n                            //$scope.selected.stopKey = false;\r\n                        },  50);\r\n                        break;\r\n                    case 'time':\r\n                        break;\r\n                }\r\n            };\r\n\r\n            // set element responsive width when element places\r\n            //function setWidth100(index) {\r\n            //    var element = angular.element('#composite-item-' + $scope.selected.id + '-' + index);\r\n            //    element.css( \"width\", 'none');\r\n            //    element.css( \"max-width\", 'none');\r\n            //};\r\n            //\r\n            //// set draggable element width when your dragg\r\n            //function setWidth(index) {\r\n            //    if ($scope.selected.isWidth) return;\r\n            //    var elementEtalon = angular.element('#pip-composite-last-' + + $scope.selected.id);\r\n            //    var value = elementEtalon.width();\r\n            //    var element = angular.element('#composite-item-' + $scope.selected.id + '-' + index);\r\n            //    if (element) {\r\n            //        element.css(\"width\", value + 'px');\r\n            //        element.css(\"max-width\", value + 'px');\r\n            //    }\r\n            //};\r\n\r\n            function setPlaceholder() {\r\n                $scope.compositePlaceholder =\r\n                    ($scope.pipCompositePlaceholder === undefined || $scope.pipCompositePlaceholder ===  null) ?\r\n                            pipTranslate.translate('COMPOSITE_PLACEHOLDER') :\r\n                            pipTranslate.translate($scope.pipCompositePlaceholder);\r\n            };\r\n\r\n            function addItem (contentType, value) {\r\n                if (_.indexOf(CONTENT_TYPES, contentType) < 0) return;\r\n\r\n                // generate new item\r\n                var newItem = {\r\n                    id: getId(),\r\n                    type: contentType,\r\n                    text: contentType == 'text' ? value : '',\r\n                    docs: contentType == 'documents' && value ? value : [],\r\n                    pic_ids: contentType == 'pictures' && value ? value : [],\r\n                    loc_pos: contentType == 'location' && value ? value.loc_pos : null,\r\n                    loc_name: contentType == 'location' && value ? value.loc_name : '',\r\n                    start: contentType == 'time' && value ? value.start : null,\r\n                    end: contentType == 'time' && value ? value.end : null,\r\n                    checklist: contentType == 'checklist' && value ? value : []\r\n                };\r\n\r\n                // calculate current index\r\n                var index = _.findIndex($scope.compositeContent, {id: $scope.selected.index});\r\n                index = index < 0 ? 0 : index;\r\n\r\n                // insert new element and select it\r\n                if ($scope.compositeContent.length == 1 && $scope.compositeContent[0].empty) {\r\n                    //newItem.id = $scope.compositeContent[0].id;\r\n                    $scope.compositeContent[0] = newItem;\r\n                } else {\r\n                    $scope.compositeContent.splice(index + 1, 0, newItem);\r\n                    index += 1;\r\n                }\r\n\r\n                // insert new element and select it\r\n                $scope.selected.index = newItem.id;\r\n                onSelect();\r\n\r\n                // focus to new element\r\n                setTimeout(scrollTo($scope.pipScrollContainer, '#composite-item-' + $scope.selected.id + '-' + index), 1000);\r\n\r\n                // set toolbar\r\n                $scope.isFirst = false;\r\n                setToolbar();\r\n                $scope.onCompositeChange();\r\n            };\r\n\r\n            function getId() {\r\n                var id = -1;\r\n                _.each($scope.compositeContent, function(item) {\r\n                    if ( id < item.id ) id = item.id;\r\n                });\r\n                return id + 1;\r\n            };\r\n\r\n            function scrollTo(parentElement, childElement) {\r\n                if(!parentElement || !childElement) return;\r\n                setTimeout(function () {\r\n                    if (!$(childElement).position()) return;\r\n                    var modDiff= Math.abs($(parentElement).scrollTop() - $(childElement).position().top);\r\n                    if (modDiff < 20) return;\r\n                    var scrollTo = $(parentElement).scrollTop() + ($(childElement).position().top - 20);\r\n                    $(parentElement).animate({\r\n                        scrollTop: scrollTo + 'px'\r\n                    }, 300);\r\n                }, 100);\r\n            };\r\n\r\n            function generateList(content) {\r\n                if (!content ||  content.length < 1) {\r\n                    clearList();\r\n                    return;\r\n                } else {\r\n                    $scope.compositeContent = [];\r\n                    _.each(content, function(item){\r\n                        item.id = getId();\r\n                        $scope.compositeContent.push(item);\r\n                    });\r\n                    $scope.isFirst = false;\r\n                }\r\n\r\n                setToolbar();\r\n            };\r\n\r\n            function setToolbar(){\r\n                if ($scope.compositeContent.length > 2) return;\r\n                $rootScope.$emit('pipCompositeNotEmpty', !$scope.isFirst);\r\n            };\r\n\r\n            function clearList() {\r\n                $scope.compositeContent = [];\r\n                $scope.compositeContent.push({\r\n                    empty: true,\r\n                    id: getId(),\r\n                    type: 'text',\r\n                    text: '', docs: [], pic_ids: [], loc_pos: null, loc_name: '',\r\n                    start: null, end: null, checklist: []\r\n                });\r\n                $scope.isFirst = true;\r\n            };\r\n\r\n            function now(){\r\n                return +new Date;\r\n            }\r\n        }]\r\n    );\r\n\r\n})();","/**\r\n * @file Composite summary control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipCompositeSummary\", [\r\n        'pipCore', 'pipDocuments', 'pipLocations', 'pipPictures', 'pipComposite.Templates']);\r\n\r\n    thisModule.directive('pipCompositeSummary',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipContents: '=',\r\n                    pipChecklistSize: '=',\r\n                    pipTextSize: '=',\r\n                    pipPrimaryBlockLimit: '=',\r\n                    pipSecondaryBlockLimit: '=',\r\n                    pipSecondaryBlockTypes: '='\r\n                },\r\n                templateUrl: 'composite_summary/composite_summary.html',\r\n                controller: 'pipCompositeSummaryController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipCompositeSummaryController',\r\n        ['$scope', '$element', '$attrs', 'pipUtils', function ($scope, $element, $attrs, pipUtils) {\r\n\r\n            $scope.rebind = pipUtils.toBoolean($attrs.pipRebind);\r\n            $scope.disableControl = true;\r\n            $scope.disabledChecklist = true;\r\n\r\n            $scope.secondaryBlockTypes = $scope.pipSecondaryBlockTypes !== undefined &&\r\n                Array.isArray($scope.pipSecondaryBlockTypes) ? $scope.pipSecondaryBlockTypes :\r\n                 ['checklist', 'documents', 'location', 'time'];\r\n            $scope.textSize = $scope.pipTextSize !== undefined && $scope.pipTextSize > 0 ? $scope.pipTextSize : 0;\r\n            $scope.secondaryBlockLimit = $scope.pipSecondaryBlockLimit !== undefined && $scope.pipSecondaryBlockLimit > 0 ? $scope.pipSecondaryBlockLimit : -1;\r\n            $scope.checklistSize = $scope.pipChecklistSize !== undefined && $scope.pipChecklistSize > 0 ? $scope.pipChecklistSize : 0;\r\n            $scope.primaryBlockLimit = $scope.pipPrimaryBlockLimit !== undefined ? $scope.pipPrimaryBlockLimit : -1;\r\n\r\n            generateList($scope.pipContents);\r\n\r\n            // Watch for options changes\r\n            if (pipUtils.toBoolean($attrs.pipRebind)) {\r\n                $scope.$watchCollection('pipContents', function (newValue) {\r\n                    if (!Array.isArray($scope.pipContents)) {\r\n                        throw new Error('Error: Attribute pip-contents must be array!');\r\n                    }\r\n                    generateList($scope.pipContents);\r\n                });\r\n            }\r\n\r\n            // Add class\r\n            $element.addClass('pip-composite-summary');\r\n\r\n            return;\r\n\r\n            // усекаем чеклист до 3\r\n            function limitChecklist(content, val) {\r\n                if (!val) return;\r\n                _.each(content, function(item) {\r\n                    if (item && item.type == 'checklist') {\r\n                        var checklistLength = item.checklist.length;\r\n                        item.checklist =_.take(item.checklist, val);\r\n                        if (checklistLength > val) item.checklist.push({\r\n                            text: '...',\r\n                             checked: false\r\n                        });\r\n                    }\r\n                });\r\n            };\r\n\r\n            // отбираем текст и картинки\r\n            function selectSummary(content) {\r\n                var result = [],\r\n                    i = 0;\r\n\r\n                _.each(content, function(item) {\r\n                    if ($scope.primaryBlockLimit >= 0 && i >= $scope.primaryBlockLimit) return result;\r\n\r\n                    //if (item.type == 'text' || item.type == 'pictures' ) {\r\n                    if ($scope.secondaryBlockTypes.indexOf(item.type) < 0) {\r\n                        result.push(item);\r\n                        i += 1;\r\n                    }\r\n                });\r\n\r\n                return result;\r\n            };\r\n\r\n            // отбираем остальные блоки если они есть\r\n            function selectSummarySecondary(content, types) {\r\n                var i, limit =  $scope.secondaryBlockLimit < 0 ? content.length : $scope.secondaryBlockLimit;\r\n                var result = [];\r\n\r\n                for (i = 0; i < content.length; i++ ) {\r\n                    if (types.indexOf(content[i].type) > -1) {\r\n                        result.push(content[i]);\r\n                        if (result.length >= limit) break;\r\n                    }\r\n                }\r\n\r\n                return result;\r\n            };\r\n\r\n            function generateList(content) {\r\n                if (!content ||  content.length < 1) {\r\n                    clearList();\r\n                    return;\r\n                } else {\r\n                     var summaryContent = _.cloneDeep(content);\r\n                    var result = selectSummary(summaryContent);\r\n                    if (result.length == 0) {\r\n                        result = selectSummarySecondary(summaryContent, $scope.secondaryBlockTypes);\r\n                    }\r\n\r\n                    limitChecklist(result, $scope.checklistSize);\r\n\r\n                    var id = 0;\r\n                    _.each(result, function(item){\r\n                        item.id = id;\r\n                        id ++;\r\n                    });\r\n                    $scope.compositeContent = result;\r\n                }\r\n            };\r\n\r\n            function clearList() {\r\n                $scope.compositeContent = [];\r\n            };\r\n\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Composite toolbar control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipCompositeToolbar\", ['pipCore', 'pipComposite.Templates']);\r\n\r\n    thisModule.config(['pipTranslateProvider', function(pipTranslateProvider) {\r\n        pipTranslateProvider.translations('en', {\r\n            'TEXT':'Text',\r\n            'CHECKLIST':'Checklist',\r\n            'LOCATION':'Location',\r\n            'PICTURE':'Picture',\r\n            'TIME':'Time',\r\n            'DOCUMENT':'Document'\r\n        });\r\n\r\n        pipTranslateProvider.translations('ru', {\r\n            'TEXT':'Текст',\r\n            'CHECKLIST':'Список',\r\n            'LOCATION':'Локация',\r\n            'PICTURE':'Изображение',\r\n            'TIME':'Время',\r\n            'DOCUMENT':'Document'\r\n        });\r\n    }]);\r\n\r\n    thisModule.directive('pipCompositeToolbar',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                replace: false,\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    pipCompositeEmpty: '&',  // set init state of toolbar\r\n                    pipToolbarButton: '=',  // set visibility toolbar button, true by default\r\n                    compositeId: '=pipCompositeId' // set pip-composite-id, for some composite in one scope\r\n                },\r\n                templateUrl: 'composite_toolbar/composite_toolbar.html',\r\n                controller: 'pipCompositeToolbarController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipCompositeToolbarController',\r\n        ['$scope', '$element', '$attrs', '$rootScope', 'pipUtils', function ($scope, $element, $attrs, $rootScope, pipUtils) {\r\n\r\n            $scope.toolbarButton = {};\r\n            $scope.emptyState = pipUtils.toBoolean($scope.pipCompositeEmpty()) != false;\r\n            $scope.disableControl = pipUtils.toBoolean($scope.ngDisabled()) != false;\r\n\r\n            setOption();\r\n\r\n            $scope.onAddItem = onAddItem;\r\n\r\n            $rootScope.$on('pipCompositeNotEmpty', function(event, value) {\r\n                $scope.emptyState = !value;\r\n            });\r\n\r\n            // Add class\r\n            $element.addClass('pip-composite-toolbar');\r\n\r\n            return;\r\n\r\n            function onAddItem(contentType) {\r\n                $rootScope.$emit('pipAddCompositeItem', {type: contentType, id: $scope.compositeId});\r\n            };\r\n\r\n            function setOption() {\r\n                if ($scope.pipToolbarButton !== null && $scope.pipToolbarButton !== undefined) {\r\n                    $scope.toolbarButton.picture = $scope.pipToolbarButton.picture === false ? $scope.pipToolbarButton.picture : true;\r\n                    $scope.toolbarButton.document = $scope.pipToolbarButton.document === false ? $scope.pipToolbarButton.document : true;\r\n                    $scope.toolbarButton.location = $scope.pipToolbarButton.location === false ? $scope.pipToolbarButton.location : true;\r\n                    $scope.toolbarButton.event = $scope.pipToolbarButton.event === false ? $scope.pipToolbarButton.event : true;\r\n                    $scope.toolbarButton.checklist = $scope.pipToolbarButton.checklist === false ? $scope.pipToolbarButton.checklist : true;\r\n                } else {\r\n                    $scope.toolbarButton.picture = true;\r\n                    $scope.toolbarButton.document = true;\r\n                    $scope.toolbarButton.location = true;\r\n                    $scope.toolbarButton.event = true;\r\n                    $scope.toolbarButton.checklist = true;\r\n                }\r\n                $scope.toolbarButton.text = true;\r\n            };\r\n\r\n        }]\r\n    );\r\n\r\n})();","/**\r\n * @file Content switch control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Remove after composite content control is ready\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipContentSwitch\", ['pipComposite.Templates']);\r\n\r\n    thisModule.directive('pipContentSwitch', \r\n        ['$parse', function($parse) {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: false,\r\n                templateUrl: 'content_switch/content_switch.html',\r\n                link: function($scope, $element, $attrs) {\r\n    \r\n                    var parentElementNameGetter = $parse($attrs.pipParentElementName);\r\n                    var parentElement = parentElementNameGetter($scope);\r\n\r\n                    $scope.onButtonClick = onButtonClick;\r\n\r\n                    // Initialization\r\n                    setOption();\r\n                    $element.addClass('pip-content-switch');\r\n\r\n                    return ;\r\n\r\n                    function scrollTo(childElement) {\r\n                        setTimeout(function () {\r\n                            var modDiff= Math.abs($(parentElement).scrollTop() - $(childElement).position().top);\r\n                            if (modDiff < 20) return;\r\n                            var scrollTo = $(parentElement).scrollTop() + ($(childElement).position().top - 20);\r\n                            $(parentElement).animate({\r\n                                scrollTop: scrollTo + 'px'\r\n                            }, 300);\r\n                        }, 100);\r\n                    };\r\n    \r\n                    function setOption() {\r\n                        if ($scope.contentSwitchOption !== null && $scope.contentSwitchOption !== undefined) {\r\n                            $scope.showIconPicture = $scope.contentSwitchOption.picture ? $scope.contentSwitchOption.picture : $scope.showIconPicture;\r\n                            $scope.showIconDocument = $scope.contentSwitchOption.document ? $scope.contentSwitchOption.document : $scope.showIconDocument;\r\n                            $scope.showIconLocation = $scope.contentSwitchOption.location ? $scope.contentSwitchOption.location : $scope.showIconLocation;\r\n                            $scope.showIconEvent = $scope.contentSwitchOption.event ? $scope.contentSwitchOption.event : $scope.showIconEvent;\r\n                        } else {\r\n                            $scope.showIconPicture = true;\r\n                            $scope.showIconDocument = true;\r\n                            $scope.showIconLocation = true;\r\n                            $scope.showIconEvent = true;\r\n                        }\r\n                    };\r\n    \r\n                    function onButtonClick(type) {\r\n                        if (!parentElement) return;\r\n    \r\n                        switch(type){\r\n                            case 'event':\r\n                                // On Event click action\r\n                                if ($scope.showEvent)\r\n                                    scrollTo('.event-edit');\r\n                                break;\r\n                            case 'documents':\r\n                                // On Documents click action\r\n                                if ($scope.showDocuments)\r\n                                    scrollTo('.pip-document-list-edit');\r\n                                break;\r\n                            case 'pictures':\r\n                                // On Pictures click action\r\n                                if ($scope.showPictures)\r\n                                    scrollTo('.pip-picture-list-edit');\r\n                                break;\r\n                            case 'location':\r\n                                // On Location click action\r\n                                if ($scope.showLocation)\r\n                                    scrollTo('.pip-location-edit');\r\n                                break;\r\n                        };\r\n                    };\r\n\r\n                }\r\n            };\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Composite view control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipCompositeView\", [\r\n        'pipCore', 'pipDocuments', 'pipLocations', 'pipPictures', 'pipComposite.Templates']);\r\n\r\n    thisModule.directive('pipCompositeView',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    pipDisabledChecklist: '&',\r\n                    pipChanged: '&',\r\n                    pipContents: '='\r\n                },\r\n                templateUrl: 'composite_view/composite_view.html',\r\n                controller: 'pipCompositeViewController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipCompositeViewController',\r\n        ['$scope', '$element', '$attrs', 'pipUtils', function ($scope, $element, $attrs, pipUtils) {\r\n\r\n            $scope.rebind = pipUtils.toBoolean($attrs.pipRebind);\r\n            $scope.disableControl = pipUtils.toBoolean($scope.ngDisabled()) != false;\r\n            $scope.disabledChecklist = pipUtils.toBoolean($scope.pipDisabledChecklist()) != false;\r\n            $scope.selected = {};\r\n            $scope.selected.isChanged = false;\r\n            generateList($scope.pipContents);\r\n\r\n            $scope.onContentChange = onContentChange;\r\n            $scope.isDisabled = isDisabled;\r\n\r\n            // Watch for options changes\r\n            if (pipUtils.toBoolean($attrs.pipRebind)) {\r\n                $scope.$watchCollection('pipContents', function (newValue) {\r\n                    if (!Array.isArray($scope.pipContents)) {\r\n                        // throw new Error('Error: Attribute pip-contents must be array!');\r\n                        return;\r\n                    }\r\n                    if (!$scope.selected.isChanged) {\r\n                        generateList($scope.pipContents);\r\n                    } else {\r\n                        $scope.selected.isChanged = false;\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Add class\r\n            $element.addClass('pip-composite-view');\r\n\r\n            return;\r\n\r\n            function isDisabled() {\r\n                return pipUtils.toBoolean($scope.pipDisabledChecklist()) == true ||\r\n                    pipUtils.toBoolean($scope.ngDisabled()) == true;\r\n            };\r\n\r\n            function updateContents() {\r\n                $scope.selected.isChanged = true;\r\n                $scope.pipContents = $scope.compositeContent;\r\n            };\r\n\r\n            function onContentChange() {\r\n                onCompositeChange();\r\n            };\r\n\r\n            function onCompositeChange() {\r\n                updateContents();\r\n                if ($scope.pipChanged)\r\n                    $scope.pipChanged();\r\n            };\r\n\r\n            function generateList(content) {\r\n                if (!content ||  content.length < 1) {\r\n                    clearList();\r\n                    return;\r\n                } else {\r\n                    $scope.compositeContent = [];\r\n                    var id = 0;\r\n                    _.each(content, function(item){\r\n                        if (typeof(item) != 'object' || item == null) {\r\n                            throw new Error('Error: content error!');\r\n                        }\r\n                        item.id = id;\r\n                        id ++;\r\n                        $scope.compositeContent.push(item);\r\n                    });\r\n                }\r\n            };\r\n\r\n            function clearList() {\r\n                $scope.compositeContent = [];\r\n            };\r\n\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Keyboard navigation with scrolling over non-focusable controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipCompositeFocused\", []);\r\n\r\n    thisModule.directive('pipCompositeFocused', function () {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,\r\n            controller: 'pipCompositeFocusedController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipCompositeFocusedController',\r\n        ['$scope', '$element', '$rootScope', function ($scope, $element, $rootScope) {\r\n            $element.bind(\"touchstart mousedown\", function (e) {\r\n                $rootScope.$broadcast('focusedComposite');\r\n            });\r\n        }]\r\n    );\r\n\r\n})();\r\n\r\n","/**\r\n * @file Touch start control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipMobileMousedown\", []);\r\n\r\n    thisModule.directive('pipMobileMousedown',\r\n        function () {\r\n            return function (scope, elem, attrs) {\r\n                elem.bind(\"touchstart mousedown\", function (e) {\r\n            //        e.preventDefault();\r\n            //        e.stopPropagation();\r\n                    scope.$apply(attrs[\"pipMobileMousedown\"]);\r\n            //        e.preventDefault();\r\n                });\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Touch start control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipMobileMouseup\", []);\r\n\r\n    thisModule.directive('pipMobileMouseup',\r\n        function () {\r\n            return function (scope, elem, attrs) {\r\n                elem.bind(\"touchend mouseup\", function (e) {\r\n                //    e.preventDefault();\r\n         //           e.stopPropagation();\r\n                    scope.$apply(attrs[\"pipMobileMouseup\"]);\r\n                });\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n"],"sourceRoot":"/source/"}
=======
{"version":3,"sources":["composite.js","pip-webui-composite-html.js","checklist_edit/checklist_edit.js","checklist_view/checklist_view.js","composite_edit/composite_edit.js","composite_summary/composite_summary.js","composite_toolbar/composite_toolbar.js","composite_view/composite_view.js","content_switch/content_switch.js","mobile_mouse/mobile_mousedown.js","mobile_mouse/mobile_mouseup.js","utilities/composite_focused.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACjkBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1gBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9dA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7IA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC7FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC5GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACzBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"pip-webui-composite.js","sourcesContent":["/**\r\n * @file Registration of composite WebUI controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular.module('pipComposite', [        \r\n        'pipContentSwitch',\r\n        'pipChecklistEdit',\r\n        'pipChecklistView',\r\n        'pipCompositeEdit',\r\n        'pipCompositeView',\r\n        'pipCompositeSummary',\r\n        'pipCompositeToolbar',\r\n        'pipCompositeFocused',\r\n\r\n        'pipMobileMouseup',\r\n        'pipMobileMousedown'\r\n    ]);\r\n    \r\n})();\r\n\r\n\r\n","(function(module) {\ntry {\n  module = angular.module('pipComposite.Templates');\n} catch (e) {\n  module = angular.module('pipComposite.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('checklist_edit/checklist_edit.html',\n    '<!--\\n' +\n    '@file Checklist edit control content\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<div ng-class=\"{\\'pip-checklist-draggable\\': selected.drag}\" id=\"{{\\'checklist-\\'  + selected.id}}\">\\n' +\n    '    <div ng-repeat=\"item in checklistContent\"\\n' +\n    '         ng-mousedown=\"onClick($event, $index)\"\\n' +\n    '         class=\"pip-checklist-item\"\\n' +\n    '         id=\"{{\\'check-item-\\'  + selected.id + \\'-\\' +  $index}}\"\\n' +\n    '         pip-drag=\"checklistContent.length > 1 && selected.drag && !item.empty\"\\n' +\n    '         pip-drag-data=\"item\"\\n' +\n    '         pip-force-touch = \"true\"\\n' +\n    '         pip-touch-delay=\"30\"\\n' +\n    '         pip-drop=\"true\"\\n' +\n    '         pip-drag-stop=\"onStop(selected.id)\"\\n' +\n    '         pip-drag-start=\"onStart(selected.id)\"\\n' +\n    '         pip-scroll-container=\"pipScrollContainer\"\\n' +\n    '         pip-drop-success=\"onDropComplete($index, $data, $event, selected.id)\">\\n' +\n    '\\n' +\n    '        <div ng-class=\"{\\'put_place\\': selected.drag}\"></div>\\n' +\n    '        <div class=\"pip-checklist-item-body layout-row layout-align-start-start\"\\n' +\n    '             pip-cancel-drag=\"true\"\\n' +\n    '             ng-class=\"{ \\'select-active-item\\': isSelectedItem($index) }\">\\n' +\n    '\\n' +\n    '            <div class=\"pip-checklist-button\"  pip-cancel-drag=\"true\">\\n' +\n    '                <md-button pip-drag-handle\\n' +\n    '                           class=\"pip-icon-checklist-button md-icon-button no-ripple-container\"\\n' +\n    '                           aria-label=\"REARRANGE\"\\n' +\n    '                           tabindex=\"-1\"\\n' +\n    '                           pip-mobile-mousedown=\"onDownDragg(item)\"\\n' +\n    '                           pip-mobile-mouseup=\"onDraggEnd()\"\\n' +\n    '                           ng-if=\"pipDraggable && checklistContent.length > 2 && !item.empty\"\\n' +\n    '                           ng-class=\"checklistContent.length > 1 ? \\'cursor-move\\' : \\'cursor-default\\'\"\\n' +\n    '                           ng-disabled=\"ngDisabled()\">\\n' +\n    '                    <md-icon class=\"text-grey\" md-svg-icon=\"icons:vhandle\"></md-icon>\\n' +\n    '                </md-button>\\n' +\n    '            </div>\\n' +\n    '            <div class=\"pip-checklist-button\" style=\"overflow: hidden\"  pip-cancel-drag=\"true\">\\n' +\n    '                <div class=\"pip-checklist-button-container\">\\n' +\n    '                    <md-button class=\"pip-icon-checklist-button md-icon-button\"\\n' +\n    '                               ng-show=\"item.empty\"\\n' +\n    '                               ng-disabled=\"ngDisabled()\"\\n' +\n    '                               md-ink-ripple\\n' +\n    '                               ng-click=\"onAddItem()\"\\n' +\n    '                               tabindex=\"-1\"\\n' +\n    '                               aria-label=\"PLUS\">\\n' +\n    '                        <md-icon class=\"text-grey\" md-svg-icon=\"icons:plus\"></md-icon>\\n' +\n    '                    </md-button>\\n' +\n    '                    <md-checkbox ng-model=\"item.checked\"\\n' +\n    '                                 ng-show=\"!item.empty\"\\n' +\n    '                                 aria-label=\"COMPLETE\"\\n' +\n    '                                 pip-cancel-drag=\"true\"\\n' +\n    '                                 ng-focus=\"onItemFocus($index)\"\\n' +\n    '                                 ng-change=\"onChecked(item)\"\\n' +\n    '                                 ng-disabled=\"ngDisabled()\">\\n' +\n    '                    </md-checkbox>\\n' +\n    '                </div>\\n' +\n    '            </div>\\n' +\n    '            <div class=\"pip-checklist-text flex \" pip-cancel-drag=\"true\">\\n' +\n    '                <md-input-container md-no-float class=\"flex\" >\\n' +\n    '                    <textarea ng-model=\"item.text\"\\n' +\n    '                              name=\"{{\\'text\\' + $index}}\"\\n' +\n    '                              aria-label=\"TEXT\"\\n' +\n    '                              class=\"pip-text-checkbox\"\\n' +\n    '                              ng-focus=\"onItemFocus($index)\"\\n' +\n    '                              ng-change=\"onChangeItem($index)\"\\n' +\n    '                              ng-keydown=\"onTextareaKeyDown($event, $index, item)\"\\n' +\n    '                              placeholder=\"{{::\\'TEXT\\' | translate}}\"\\n' +\n    '                              id=\"{{\\'check-item-text-\\' + selected.id + \\'-\\' + $index}}\"\\n' +\n    '                              ng-disabled=\"ngDisabled()\">\\n' +\n    '                    </textarea>\\n' +\n    '                </md-input-container>\\n' +\n    '            </div>\\n' +\n    '            <div class=\"pip-checklist-button\"  pip-cancel-drag=\"true\">\\n' +\n    '                <md-button class=\"pip-icon-checklist-button md-icon-button\" md-ink-ripple\\n' +\n    '                           ng-click=\"onDeleteItem($index, item)\"\\n' +\n    '                           ng-disabled=\"ngDisabled()\"\\n' +\n    '                           tabindex=\"-1\"\\n' +\n    '                           ng-focus=\"onItemFocus($index)\"\\n' +\n    '                           ng-show=\"isSelectedItem($index)\"\\n' +\n    '                           aria-label=\"DELETE-ITEM\">\\n' +\n    '                    <md-icon class=\"text-grey\" md-svg-icon=\"icons:cross-circle\"></md-icon>\\n' +\n    '                </md-button>\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '\\n' +\n    '    <div id=\"{{\\'check-item-empty-\\' + selected.id}}\"\\n' +\n    '         class=\"pip-empty-text\"\\n' +\n    '         pip-drag=\"false\"\\n' +\n    '         pip-drop=\"true\"\\n' +\n    '         pip-drop-success=\"onDropComplete(checklistContent.length, $data, $event, selected.id)\">\\n' +\n    '        <div ng-class=\"{\\'put_place\\': selected.drag}\"></div>\\n' +\n    '    </div>\\n' +\n    '</div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipComposite.Templates');\n} catch (e) {\n  module = angular.module('pipComposite.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('checklist_view/checklist_view.html',\n    '<div ng-repeat=\"item in checklistContent track by $index\">\\n' +\n    '    <div class=\"pip-checklist-item layout-row layout-align-start-start\">\\n' +\n    '        <div class=\"pip-checklist-icon\">\\n' +\n    '            <md-checkbox  ng-model=\"item.checked\"\\n' +\n    '                          ng-click=\"onClick($event, item)\"\\n' +\n    '                          aria-label=\"COMPLETE\"\\n' +\n    '                          ng-disabled=\"ngDisabled()\">\\n' +\n    '            </md-checkbox>\\n' +\n    '        </div>\\n' +\n    '        <div class=\"pip-checklist-text flex\">\\n' +\n    '            <pip-markdown pip-text=\"item.text\"\\n' +\n    '                          pip-rebind=\"true\"\\n' +\n    '                          ng-disabled=\"true\">\\n' +\n    '            </pip-markdown>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '</div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipComposite.Templates');\n} catch (e) {\n  module = angular.module('pipComposite.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('composite_edit/composite_edit.html',\n    '<!--\\n' +\n    '@file Composite edit control content\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<div class=\"divider-top\">\\n' +\n    '    <div class=\"pip-composite-body\"\\n' +\n    '         ng-show=\"compositeContent.length != 0\"\\n' +\n    '         ng-class=\"{\\'drag-active\\': selected.drag}\">\\n' +\n    '\\n' +\n    '        <div class=\"pip-composite-item\"\\n' +\n    '             ng-repeat=\"obj in compositeContent track by obj.id\"\\n' +\n    '             ng-mousedown=\"onClick($event, $index, obj)\"\\n' +\n    '             ng-class=\"{\\'selected-content\\': isSelectedSection($index, obj),\\n' +\n    '                        \\'composite-animate\\': !obj.empty && compositeContent.length > 1}\"\\n' +\n    '             ng-keyup=\"onKeyUp($event)\"\\n' +\n    '             ng-keydown=\"onKeyDown($event, $index, obj)\"\\n' +\n    '             pip-drag=\"compositeContent.length > 1 && selected.drag\"\\n' +\n    '             pip-touch-delay=\"10\"\\n' +\n    '             pip-drag-data=\"obj\"\\n' +\n    '             pip-scroll-container=\"pipScrollContainer\"\\n' +\n    '             pip-drop=\"true\"\\n' +\n    '             pip-force-touch = \"true\"\\n' +\n    '             pip-drag-stop=\"onStop(selected.id)\"\\n' +\n    '             pip-drag-start=\"onStart(selected.id)\"\\n' +\n    '             pip-drop-success=\"onDropComplete($index, $data, $event, selected.id)\"\\n' +\n    '             id=\"{{\\'composite-item-\\' + selected.id + \\'-\\' + $index}}\">\\n' +\n    '\\n' +\n    '            <!--<div ng-class=\"{\\'putt_box\\': selected.drag}\"></div>-->\\n' +\n    '            <div class=\"putt_box\"></div>\\n' +\n    '            <div class=\"pip-section-header layout-row layout-align-start-center\"\\n' +\n    '                 ng-if=\"!obj.empty\">\\n' +\n    '                <div class=\"w38\"></div>\\n' +\n    '                <md-button class=\"md-icon-button md-icon-button-little icon-rearrange-btn no-ripple-container rm8 cursor-move\"\\n' +\n    '                           ng-if=\"!ngDisabled() && compositeContent.length > 1\"\\n' +\n    '                           pip-drag-handle\\n' +\n    '                           pip-mobile-mousedown=\"onDownDragg($event, obj)\"\\n' +\n    '                           pip-mobile-mouseup=\"onDraggEnd()\"\\n' +\n    '                           tabindex=\"-1\"\\n' +\n    '                           aria-label=\"COMPOSITE-DRAGG\"\\n' +\n    '                           ng-hide=\"compositeContent.length == 1\">\\n' +\n    '                    <md-icon class=\"composite-icon cursor-move\" md-svg-icon=\"icons:handle\"></md-icon>\\n' +\n    '                </md-button>\\n' +\n    '                <div>\\n' +\n    '                    <md-button class=\"md-icon-button md-icon-button-little rm8\"\\n' +\n    '                               ng-click=\"onDeleteItem($index)\"\\n' +\n    '                               ng-disabled=\"ngDisabled()\"\\n' +\n    '                               aria-label=\"COMPOSITE-DELETE\">\\n' +\n    '                        <md-icon class=\"composite-icon\" md-svg-icon=\"icons:cross\"></md-icon>\\n' +\n    '                    </md-button>\\n' +\n    '                </div>\\n' +\n    '            </div>\\n' +\n    '            <!--pip-prevent-drag-->\\n' +\n    '            <!-- for text -->\\n' +\n    '            <div class=\"pip-section-content rp24-flex lp24-flex tp16 bp16\"\\n' +\n    '                 ng-if=\"obj.type == \\'text\\'\" pip-cancel-drag=\"true\">\\n' +\n    '                <md-input-container class=\"p0 m0 w-stretch\" md-no-float>\\n' +\n    '                            <textarea ng-model=\"obj.text\" aria-label=\"text\"\\n' +\n    '                                      placeholder=\"{{ isFirst ? compositePlaceholder : \\'TEXT\\' | translate}}\"\\n' +\n    '                                      id=\"{{\\'composite-item-text-\\' + selected.id + \\'-\\' + $index}}\"\\n' +\n    '                                      ng-change=\"onContentChange(obj)\"\\n' +\n    '                                      pip-cancel-drag=\"true\"\\n' +\n    '                                      ng-disabled=\"ngDisabled()\">\\n' +\n    '                            </textarea>\\n' +\n    '                </md-input-container>\\n' +\n    '            </div>\\n' +\n    '            <!-- -->\\n' +\n    '            <div class=\"pip-section-content rp24-flex lp24-flex vp20\"\\n' +\n    '                 ng-if=\"obj.type == \\'pictures\\'\" pip-cancel-drag=\"true\">\\n' +\n    '                <pip-picture-list-edit class=\"w-stretch\"\\n' +\n    '                                       pip-cancel-drag=\"true\"\\n' +\n    '                                       pip-picture-ids=\"obj.pic_ids\"\\n' +\n    '                                       pip-changed=\"onContentChange(obj)\"\\n' +\n    '                                       pip-created=\"obj.pictures = $event.sender\"\\n' +\n    '                                       pip-cancel-drag=\"true\"\\n' +\n    '                                       pip-added-picture=\"addedContent\"\\n' +\n    '                                       ng-disabled=\"ngDisabled()\">\\n' +\n    '                </pip-picture-list-edit>\\n' +\n    '            </div>\\n' +\n    '            <!-- -->\\n' +\n    '            <div class=\"pip-section-content rp24-flex lp24-flex vp20\"\\n' +\n    '                 ng-if=\"obj.type == \\'documents\\'\" pip-cancel-drag=\"true\">\\n' +\n    '                <pip-document-list-edit class=\"w-stretch\"\\n' +\n    '                                        pip-documents=\"obj.docs\"\\n' +\n    '                                        pip-cancel-drag=\"true\"\\n' +\n    '                                        pip-changed=\"onContentChange(obj)\"\\n' +\n    '                                        pip-cancel-drag=\"true\"\\n' +\n    '                                        pip-created=\"obj.documents = $event.sender\"\\n' +\n    '                                        pip-added-document=\"addedContent\"\\n' +\n    '                                        ng-disabled=\"ngDisabled()\">\\n' +\n    '                </pip-document-list-edit>\\n' +\n    '            </div>\\n' +\n    '\\n' +\n    '            <div class=\"pip-section-content layout-row layout-align-start-center\"\\n' +\n    '                 ng-if=\"obj.type == \\'checklist\\'\" pip-cancel-drag=\"true\">\\n' +\n    '                <pip-checklist-edit pip-options=\"obj.checklist\"\\n' +\n    '                                    pip-draggable=\"isActiveChecklist(obj)\"\\n' +\n    '                                    pip-changed=\"onContentChange(obj)\"\\n' +\n    '                                    ng-disabled=\"ngDisabled()\"\\n' +\n    '                                    pip-scroll-container=\"{{pipScrollContainer}}\"\\n' +\n    '                                    pip-rebind=\"true\">\\n' +\n    '                </pip-checklist-edit>\\n' +\n    '            </div>\\n' +\n    '\\n' +\n    '            <div class=\"pip-section-content vp20 rp24-flex lp24-flex\"\\n' +\n    '                 ng-if=\"obj.type == \\'location\\'\" pip-cancel-drag=\"true\">\\n' +\n    '                <pip-location-edit class=\"pip-location-attachments w-stretch\"\\n' +\n    '                                   pip-location-name=\"obj.loc_name\"\\n' +\n    '                                   pip-location-pos=\"obj.loc_pos\"\\n' +\n    '                                   pip-cancel-drag=\"true\"\\n' +\n    '                                   pip-location-holder=\"pipLocationHolder\"\\n' +\n    '                                   pip-changed=\"onContentChange(obj)\"\\n' +\n    '                                   ng-disabled=\"ngDisabled()\">\\n' +\n    '                </pip-location-edit>\\n' +\n    '            </div>\\n' +\n    '            <!-- -->\\n' +\n    '            <div class=\"pip-section-content bp16-flex rp24-flex lp24-flex tp20\"\\n' +\n    '                 ng-if=\"obj.type == \\'time\\'\" pip-cancel-drag=\"true\">\\n' +\n    '                <pip-time-range-edit class=\"w-stretch\"\\n' +\n    '                               pip-start-date=\"obj.start\"\\n' +\n    '                               pip-end-date=\"obj.end\"\\n' +\n    '                               pip-size=\"$sizeGtSmall\"\\n' +\n    '                               pip-changed=\"onContentChange(obj)\"\\n' +\n    '                               ng-disabled=\"ngDisabled()\"\\n' +\n    '                               pip-start-label=\"{{ \\'COMPOSITE_START_TIME\\' | translate }}\"\\n' +\n    '                               pip-end-label=\"{{ \\'COMPOSITE_END_TIME\\' | translate }}\">\\n' +\n    '                </pip-time-range-edit>\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '        <div class=\"pip-composite-item w-stretch\"\\n' +\n    '             pip-drag=\"false\"\\n' +\n    '             pip-drop=\"true\"\\n' +\n    '             pip-drop-success=\"onDropComplete(compositeContent.length, $data, $event, selected.id)\"\\n' +\n    '             pip-drag-stop=\"onStop(selected.id)\"\\n' +\n    '             pip-drag-start=\"onStart(selected.id)\"\\n' +\n    '             id=\"{{\\'pip-composite-last-\\' + selected.id}}\">\\n' +\n    '\\n' +\n    '            <!--<div ng-class=\"{\\'putt_box\\': selected.drag}\"></div>-->\\n' +\n    '            <div class=\"putt_box\"></div>\\n' +\n    '            <div class=\"pip-section-content h24\" style=\"border: 0px!important;\">\\n' +\n    '            </div>\\n' +\n    '        </div>\\n' +\n    '    </div>\\n' +\n    '</div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipComposite.Templates');\n} catch (e) {\n  module = angular.module('pipComposite.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('composite_summary/composite_summary.html',\n    '<div ng-repeat=\"item in compositeContent track by $index\">\\n' +\n    '\\n' +\n    '    <!-- for text -->\\n' +\n    '    <div class=\"pip-composite-text\" ng-if=\"item.type == \\'text\\' && item.text\">\\n' +\n    '        <pip-markdown pip-text=\"item.text\"\\n' +\n    '                      pip-line-count=\"{{textSize}}\"\\n' +\n    '                      pip-rebind=\"true\"\\n' +\n    '                      ng-disabled=\"true\">\\n' +\n    '        </pip-markdown>\\n' +\n    '    </div>\\n' +\n    '    <!-- for pictures -->\\n' +\n    '    <div ng-if=\"item.type == \\'pictures\\' && item.pic_ids.length > 0\"\\n' +\n    '         ng-class=\" compositeContent[$index - 1].type != \\'pictures\\' ?\\n' +\n    '                    compositeContent[$index + 1].type != \\'pictures\\' ? \\'tm16 bm16\\' : \\'tm16 bm0\\' :\\n' +\n    '                    compositeContent[$index + 1].type != \\'pictures\\' ? \\'tm8 bm16\\' : \\'tm8 bm0\\' \"\\n' +\n    '         class=\"pip-composite-pictures\">\\n' +\n    '        <pip-collage ng-if=\"rebind\"\\n' +\n    '                     pip-picture-ids=\"item.pic_ids\"\\n' +\n    '                     pip-unique-code=\"item.id\"\\n' +\n    '                     pip-multiple=\"true\"\\n' +\n    '                     pip-open=\"disableControl\"\\n' +\n    '                     pip-rebind=\"true\"\\n' +\n    '                     ng-disabled=\"disableControl\">\\n' +\n    '        </pip-collage>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <!-- for documents -->\\n' +\n    '    <div ng-if=\"item.type == \\'documents\\' && item.docs.length > 0\"\\n' +\n    '         class=\"pip-composite-documents layout-row flex\">\\n' +\n    '        <pip-document-list class=\"flex\"\\n' +\n    '                           pip-documents=\"item.docs\"\\n' +\n    '                           pip-rebind=\"true\"\\n' +\n    '                           pip-document-icon=\"true\"\\n' +\n    '                           pip-collapse=\"true\"\\n' +\n    '                           ng-disabled=\"disableControl\">\\n' +\n    '        </pip-document-list>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <!--for checklist -->\\n' +\n    '    <div ng-if=\"item.type == \\'checklist\\' && item.checklist.length > 0\"\\n' +\n    '         class=\"pip-composite-checklist\">\\n' +\n    '        <pip-checklist-view pip-options=\"item.checklist\"\\n' +\n    '                            pip-changed=\"onContentChange()\"\\n' +\n    '                            pip-rebind=\"true\"\\n' +\n    '                            pip-collapse=\"true\"\\n' +\n    '                            ng-disabled=\"disabledChecklist\">\\n' +\n    '        </pip-checklist-view>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <!--for location -->\\n' +\n    '    <div class=\"pip-composite-location layout-row layout-align-start-center flex\"\\n' +\n    '         ng-if=\"item.type == \\'location\\' && (item.loc_pos || item.loc_name)\">\\n' +\n    '\\n' +\n    '        <pip-location class=\"flex\"\\n' +\n    '                      pip-location-name=\"item.loc_name\"\\n' +\n    '                      pip-location-pos=\"item.loc_pos\"\\n' +\n    '                      pip-collapse=\"true\"\\n' +\n    '                      pip-show-location-icon=\"true\"\\n' +\n    '                      ng-disabled=\"disableControl\"\\n' +\n    '                      pip-rebind=\"true\">\\n' +\n    '        </pip-location>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <!-- for time -->\\n' +\n    '    <div class=\"pip-composite-time layout-row layout-align-start-center flex\"\\n' +\n    '         ng-if=\"item.type == \\'time\\' && (item.start || item.end)\">\\n' +\n    '\\n' +\n    '        <md-icon md-svg-icon=\"icons:time\" class=\"rm24 lm0\"></md-icon>\\n' +\n    '        <pip-time-range\\n' +\n    '                pip-start-date=\"item.start\"\\n' +\n    '                pip-end-date=\"item.end\"\\n' +\n    '                pip-rebind=\"true\"\\n' +\n    '                ng-disabled=\"disableControl\">\\n' +\n    '        </pip-time-range>\\n' +\n    '    </div>\\n' +\n    '</div>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipComposite.Templates');\n} catch (e) {\n  module = angular.module('pipComposite.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('composite_toolbar/composite_toolbar.html',\n    '<!--\\n' +\n    '@file Composite toolbar control content\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<div class=\"layout-row layout-align-start-start flex\">\\n' +\n    '    <md-button class=\"pip-composite-button\"\\n' +\n    '               ng-if=\"!emptyState\"\\n' +\n    '               ng-class=\"{ \\'remove-item\\': !emptyState ,\\n' +\n    '                                \\'new-item\\': !emptyState }\"\\n' +\n    '               ng-click=\"onAddItem(\\'text\\');\"\\n' +\n    '               aria-label=\"COMPOSITE-BUTTON-TEXT\"\\n' +\n    '               ng-disabled=\"ngDisabled()\">\\n' +\n    '        <md-icon class=\"icon-text-block\" md-svg-icon=\"icons:text\"></md-icon>\\n' +\n    '        <md-tooltip>{{::\\'TEXT\\'| translate}}</md-tooltip>\\n' +\n    '    </md-button>\\n' +\n    '    <md-button ng-if=\"toolbarButton.checklist\"\\n' +\n    '               ng-click=\"onAddItem(\\'checklist\\')\"\\n' +\n    '               ng-disabled=\"ngDisabled()\"\\n' +\n    '               class=\"pip-composite-button\"\\n' +\n    '               aria-label=\"COMPOSITE-BUTTON-CHECKLIST\">\\n' +\n    '        <md-icon class=\"icon-checkbox-on\" md-svg-icon=\"icons:checkbox-on\"></md-icon>\\n' +\n    '        <md-tooltip>{{::\\'CHECKLIST\\'| translate}}</md-tooltip>\\n' +\n    '    </md-button>\\n' +\n    '    <md-button ng-if=\"toolbarButton.picture\"\\n' +\n    '               ng-click=\"onAddItem(\\'pictures\\')\"\\n' +\n    '               ng-disabled=\"ngDisabled()\"\\n' +\n    '               class=\"pip-composite-button\"\\n' +\n    '               aria-label=\"COMPOSITE-BUTTON-PICTURES\">\\n' +\n    '        <md-icon class=\"icon-camera\" md-svg-icon=\"icons:camera\"></md-icon>\\n' +\n    '        <md-tooltip>{{::\\'PICTURE\\'| translate}}</md-tooltip>\\n' +\n    '    </md-button>\\n' +\n    '    <md-button ng-click=\"onAddItem(\\'documents\\')\"\\n' +\n    '               ng-if=\"toolbarButton.document\"\\n' +\n    '               ng-disabled=\"ngDisabled()\"\\n' +\n    '               class=\"pip-composite-button\"\\n' +\n    '               aria-label=\"COMPOSITE-BUTTON-DOCUMENTS\">\\n' +\n    '        <md-icon class=\"icon-document\" md-svg-icon=\"icons:document\"></md-icon>\\n' +\n    '        <md-tooltip>{{::\\'DOCUMENT\\'| translate}}</md-tooltip>\\n' +\n    '    </md-button>\\n' +\n    '    <md-button ng-click=\"onAddItem(\\'location\\')\"\\n' +\n    '               ng-if=\"toolbarButton.location\"\\n' +\n    '               ng-disabled=\"ngDisabled()\"\\n' +\n    '               class=\"pip-composite-button\"\\n' +\n    '               aria-label=\"COMPOSITE-BUTTON-LOCATIONS\">\\n' +\n    '        <md-icon class=\"icon-location\" md-svg-icon=\"icons:location\"></md-icon>\\n' +\n    '        <md-tooltip>{{::\\'LOCATION\\'| translate}}</md-tooltip>\\n' +\n    '    </md-button>\\n' +\n    '    <md-button ng-click=\"onAddItem(\\'time\\')\"\\n' +\n    '               ng-if=\"toolbarButton.event\"\\n' +\n    '               ng-disabled=\"ngDisabled()\"\\n' +\n    '               class=\"pip-composite-button\"\\n' +\n    '               aria-label=\"COMPOSITE-BUTTON-TIME\">\\n' +\n    '        <md-icon class=\"icon-time\" md-svg-icon=\"icons:time\"></md-icon>\\n' +\n    '        <md-tooltip>{{::\\'TIME\\'| translate}}</md-tooltip>\\n' +\n    '    </md-button>\\n' +\n    '\\n' +\n    '</div>');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipComposite.Templates');\n} catch (e) {\n  module = angular.module('pipComposite.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('composite_view/composite_view.html',\n    '<div ng-repeat=\"item in compositeContent track by $index\">\\n' +\n    '\\n' +\n    '    <!-- for text -->\\n' +\n    '    <div class=\"pip-composite-text lp24-flex rp24-flex\" ng-if=\"item.type == \\'text\\' && item.text\" ng-class=\"{\\'bm16\\': $last}\">\\n' +\n    '        <pip-markdown pip-text=\"item.text\"\\n' +\n    '                      pip-rebind=\"true\"\\n' +\n    '                      ng-disabled=\"true\">\\n' +\n    '        </pip-markdown>\\n' +\n    '    </div>\\n' +\n    '    <!-- for pictures -->\\n' +\n    '    <div ng-if=\"item.type == \\'pictures\\' && item.pic_ids.length > 0\"\\n' +\n    '         ng-class=\" compositeContent[$index - 1].type != \\'pictures\\' ?\\n' +\n    '                    compositeContent[$index + 1].type != \\'pictures\\' ? \\'tm16 bm16\\' : \\'tm16 bm0\\' :\\n' +\n    '                    compositeContent[$index + 1].type != \\'pictures\\' ? \\'tm8 bm16\\' : \\'tm8 bm0\\' \"\\n' +\n    '         class=\"pip-composite-pictures lp24-flex rp24-flex\">\\n' +\n    '        <pip-collage ng-if=\"rebind\"\\n' +\n    '                pip-picture-ids=\"item.pic_ids\"\\n' +\n    '                pip-unique-code=\"item.id\"\\n' +\n    '                pip-multiple=\"true\"\\n' +\n    '                pip-open=\"true\"\\n' +\n    '                pip-rebind=\"true\"\\n' +\n    '                ng-disabled=\"ngDisabled()\">\\n' +\n    '        </pip-collage>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <!-- for documents -->\\n' +\n    '    <div ng-if=\"item.type == \\'documents\\' && item.docs.length > 0\"\\n' +\n    '         class=\"pip-composite-documents layout-row layout-align-start-start flex\">\\n' +\n    '        <pip-document-list pip-documents=\"item.docs\"\\n' +\n    '                           pip-document-icon=\"true\"\\n' +\n    '                           pip-rebind=\"true\"\\n' +\n    '                           ng-disabled=\"ngDisabled()\">\\n' +\n    '        </pip-document-list>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <!--for checklist -->\\n' +\n    '    <div ng-if=\"item.type == \\'checklist\\' && item.checklist.length > 0\"\\n' +\n    '         class=\"pip-composite-checklist lp24-flex rp24-flex\">\\n' +\n    '        <pip-checklist-view pip-options=\"item.checklist\"\\n' +\n    '                            pip-changed=\"onContentChange()\"\\n' +\n    '                            pip-rebind=\"true\"\\n' +\n    '                            ng-disabled=\"isDisabled()\">\\n' +\n    '        </pip-checklist-view>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <!--for location -->\\n' +\n    '    <div class=\"pip-composite-location layout-row layout-align-start-start flex\"\\n' +\n    '         ng-if=\"item.type == \\'location\\' && (item.loc_pos || item.loc_name)\">\\n' +\n    '\\n' +\n    '        <pip-location class=\"flex\"\\n' +\n    '                      pip-location-name=\"item.loc_name\"\\n' +\n    '                      pip-location-pos=\"item.loc_pos\"\\n' +\n    '                      pip-show-location-icon=\"true\"\\n' +\n    '                      pip-collapse=\"false\"\\n' +\n    '                      ng-disabled=\"ngDisabled()\"\\n' +\n    '                      pip-rebind=\"true\">\\n' +\n    '        </pip-location>\\n' +\n    '    </div>\\n' +\n    '\\n' +\n    '    <!-- for time -->\\n' +\n    '    <div class=\"pip-composite-time lp24-flex rp24-flex layout-row layout-align-start-center  flex\"\\n' +\n    '         ng-if=\"item.type == \\'time\\'\">\\n' +\n    '\\n' +\n    '        <md-icon md-svg-icon=\"icons:time\" class=\"lm0\"></md-icon>\\n' +\n    '        <pip-time-range\\n' +\n    '                pip-start-date=\"item.start\"\\n' +\n    '                pip-end-date=\"item.end\"\\n' +\n    '                pip-rebind=\"true\"\\n' +\n    '                ng-disabled=\"ngDisabled()\">\\n' +\n    '        </pip-time-range>\\n' +\n    '    </div>\\n' +\n    '</div>\\n' +\n    '');\n}]);\n})();\n\n(function(module) {\ntry {\n  module = angular.module('pipComposite.Templates');\n} catch (e) {\n  module = angular.module('pipComposite.Templates', []);\n}\nmodule.run(['$templateCache', function($templateCache) {\n  $templateCache.put('content_switch/content_switch.html',\n    '<!--\\n' +\n    '@file Content switch control content\\n' +\n    '@copyright Digital Living Software Corp. 2014-2016\\n' +\n    '-->\\n' +\n    '\\n' +\n    '<md-button ng-click=\"showPictures = !showPictures; onButtonClick(\\'pictures\\')\"\\n' +\n    '           aria-label=\"showPictures\"\\n' +\n    '           class=\"md-icon-button\"\\n' +\n    '           ng-show=\"showIconPicture\"\\n' +\n    '           ng-disabled=\"transaction.busy()\">\\n' +\n    '        <md-icon class=\"active-camera\"\\n' +\n    '                 ng-class=\"{ \\'active-camera\\': showPictures }\"\\n' +\n    '                 md-svg-icon=\"icons:camera\"></md-icon>\\n' +\n    '</md-button>\\n' +\n    '<md-button ng-click=\"showDocuments = !showDocuments; onButtonClick(\\'documents\\')\"\\n' +\n    '           aria-label=\"showDocuments\"\\n' +\n    '           class=\"md-icon-button\"\\n' +\n    '           ng-show=\"showIconDocument\"\\n' +\n    '           ng-disabled=\"transaction.busy()\">\\n' +\n    '    <md-icon ng-class=\"{ \\'active-document\\': showDocuments }\" md-svg-icon=\"icons:document\"></md-icon>\\n' +\n    '</md-button>\\n' +\n    '<md-button ng-click=\"showEvent = !showEvent; onButtonClick(\\'event\\')\"\\n' +\n    '           aria-label=\"showEvent\"\\n' +\n    '           class=\"md-icon-button\"\\n' +\n    '           ng-show=\"showIconEvent\"\\n' +\n    '           ng-disabled=\"transaction.busy()\">\\n' +\n    '    <md-icon ng-class=\"{ \\'active-time\\': showEvent }\" md-svg-icon=\"icons:time\"></md-icon>\\n' +\n    '</md-button>\\n' +\n    '<md-button ng-click=\"showLocation = !showLocation; onButtonClick(\\'location\\')\"\\n' +\n    '           aria-label=\"showLocation\"\\n' +\n    '           class=\"md-icon-button\"\\n' +\n    '           ng-show=\"showIconLocation\"\\n' +\n    '           ng-disabled=\"transaction.busy()\">\\n' +\n    '    <md-icon ng-class=\"{ \\'active-location\\': showLocation }\" md-svg-icon=\"icons:location\"></md-icon>\\n' +\n    '</md-button>');\n}]);\n})();\n","/**\r\n * @file Checklist edit control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * + Improve samples in sampler app\r\n * + Renamed to pip-checklist-edit and implement pip-checklist (pip-checklist-view) control\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipChecklistEdit\", ['pipCore', 'pipComposite.Templates']);\r\n\r\n    /**\r\n     * ngDisabled: '&',\r\n     * pipChanged: '=',\r\n     * pipDraggable: '=',\r\n     * pipOptions: '=',\r\n     * pipScrollContainer: '@'\r\n     */\r\n    thisModule.directive('pipChecklistEdit',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                replace: false,\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    pipChanged: '=',\r\n                    pipDraggable: '=',\r\n                    pipOptions: '=',\r\n                    pipScrollContainer: '@'\r\n                },\r\n                templateUrl: 'checklist_edit/checklist_edit.html',\r\n                controller: 'pipChecklistEditController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipChecklistEditController',\r\n        ['$scope', '$element', '$attrs', '$document', 'pipUtils', '$rootScope', function ($scope, $element, $attrs, $document,pipUtils, $rootScope) {\r\n\r\n            $scope.selected = {};\r\n            $scope.selected.index = 0;\r\n            $scope.selected.drag = $scope.pipDraggable;\r\n            $scope.selected.dragInit = $scope.pipDraggable;\r\n            $scope.selected.dragId = 0;\r\n            $scope.selected.id = now();\r\n            $scope.selected.isChanged = false;\r\n\r\n            generateList($scope.pipOptions);\r\n\r\n            $scope.onTextareaKeyDown = onTextareaKeyDown;\r\n            $scope.onAddItem = onAddItem;\r\n            $scope.onChangeItem = onChangeItem;\r\n            $scope.onClick = onClick;\r\n            $scope.onTextAreaClick = onTextAreaClick;\r\n            $scope.onDropComplete = onDropComplete;\r\n            $scope.onDeleteItem = onDeleteItem;\r\n            $scope.onChecked = onChecked;\r\n            $scope.updateContents = updateContents;\r\n            $scope.onItemFocus = onItemFocus;\r\n            $scope.onMove = onMove;\r\n            $scope.onStart = onStart;\r\n            $scope.onStop = onStop;\r\n            $scope.isDisabled = isDisabled;\r\n            $scope.onDownDragg = onDownDragg;\r\n\r\n            $scope.isSelectedItem = isSelectedItem;\r\n\r\n            // Watch for options changes\r\n            if (pipUtils.toBoolean($attrs.pipRebind)) {\r\n                $scope.$watchCollection('pipOptions', function (newValue) {\r\n                    if (!$scope.selected.isChanged) {\r\n                        generateList($scope.pipOptions);\r\n                    } else {\r\n                        $scope.selected.isChanged = false;\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (pipUtils.toBoolean($attrs.pipRebind)) {\r\n                $scope.$watchCollection('pipDraggable', function (newValue) {\r\n                    $scope.pipDraggable = newValue;\r\n                });\r\n            }\r\n\r\n            $scope.onChecklistChange = _.debounce(onChecklistChange , 200);\r\n\r\n            // Add class\r\n            $element.addClass('pip-checklist-edit');\r\n\r\n            return;\r\n\r\n            function getCaret(el) {\r\n                if (el.selectionStart) {\r\n                    return el.selectionStart;\r\n                } else if ($document.selection) {\r\n                    el.focus();\r\n\r\n                    var r = $document.selection.createRange();\r\n                    if (r == null) {\r\n                        return 0;\r\n                    }\r\n\r\n                    var re = el.createTextRange(),\r\n                        rc = re.duplicate();\r\n                    re.moveToBookmark(r.getBookmark());\r\n                    rc.setEndPoint('EndToStart', re);\r\n\r\n                    return rc.text.length;\r\n                }\r\n                return 0;\r\n            }\r\n\r\n            function isDisabled() {\r\n                if ($scope.ngDisabled) {\r\n                    return $scope.ngDisabled();\r\n                } else {\r\n                    return false;\r\n                }\r\n            };\r\n\r\n            function onItemFocus(index) {\r\n                if (isDisabled()) return;\r\n                $scope.selected.index = index;\r\n            };\r\n\r\n            function isSelectedItem(index) {\r\n                var empty;\r\n                try {\r\n                    empty = $scope.checklistContent[index].empty;\r\n                } catch (err) {\r\n                    empty = true;\r\n                }\r\n\r\n                return $scope.selected.index == index && $scope.pipDraggable && !empty;\r\n            };\r\n\r\n            function setSelectionRange(input, selectionStart, selectionEnd) {\r\n                if (input.setSelectionRange) {\r\n                    input.focus();\r\n                    input.setSelectionRange(selectionStart, selectionEnd);\r\n                }\r\n                else if (input.createTextRange) {\r\n                    var range = input.createTextRange();\r\n                    range.collapse(true);\r\n                    range.moveEnd('character', selectionEnd);\r\n                    range.moveStart('character', selectionStart);\r\n                    range.select();\r\n                }\r\n            }\r\n\r\n            function setCaretToPos (input, pos) {\r\n                setSelectionRange(input, pos, pos);\r\n            }\r\n\r\n            function onTextareaKeyDown($event, index, item) {\r\n                if (isDisabled()) return;\r\n                if ($scope.selected.index == -1) return;\r\n\r\n\r\n                if ($event && $event.target) {\r\n                    // calculate caret position\r\n                    var posCaret = getCaret($event.target);\r\n                    // calculate textarea length\r\n                    if ($event.target.value !== undefined)\r\n                        var textareaLength = $event.target.value.length;\r\n                }\r\n                \r\n                // delete empty item after backspace or del\r\n                if ($scope.selected.index > 0 && item.text != '' && posCaret == 0 && $event.keyCode == 8  && !$event.ctrlKey && !$event.shiftKey) {\r\n                    if (!item.empty) {\r\n                        var position = $scope.checklistContent[$scope.selected.index - 1].text.length;\r\n                        $scope.checklistContent[$scope.selected.index - 1].text = $scope.checklistContent[$scope.selected.index - 1].text + item.text;\r\n                        $scope.selected.index -= 1;\r\n                        $scope.checklistContent.splice($scope.selected.index + 1, 1);\r\n                        $scope.onChecklistChange();\r\n                        \r\n                        setFocus($scope.selected.index, position);\r\n                    }\r\n                    if ($event) $event.stopPropagation();\r\n                    return false;\r\n                }\r\n                \r\n                if (item.text == '' && ($event.keyCode == 8 || $event.keyCode == 46) && !$event.ctrlKey && !$event.shiftKey) {\r\n                    if (!item.empty) onDeleteItem(index, item);\r\n                    if ($event) $event.stopPropagation();\r\n                    return false;\r\n                }\r\n\r\n                //press enter - create new item\r\n                if (($event.keyCode == 13 || $event.keyCode == 45) && !$event.ctrlKey && !$event.shiftKey) {  // insert\r\n                    if (posCaret !== undefined && posCaret == 0) {\r\n                        // add item before current item\r\n                        if ($scope.selected.index > 0) addItem('', $scope.selected.index - 1);\r\n                        else  {\r\n                            $scope.selected.index = -1;\r\n                            addItem('', -1);\r\n                        }\r\n                        if ($event) $event.stopPropagation();\r\n                        if ($event) $event.preventDefault();\r\n\r\n                        return false;\r\n                    }\r\n\r\n                    if (textareaLength && posCaret && textareaLength == posCaret) {\r\n                        // add item after current item\r\n                        if (!item.empty) {\r\n                            addItem('', $scope.selected.index);\r\n                        }\r\n                        if ($event) $event.stopPropagation();\r\n                        if ($event) $event.preventDefault();\r\n                        return false;\r\n                    } \r\n                    \r\n                     if (textareaLength && posCaret && textareaLength > posCaret) {\r\n                        // divide current item \r\n                        if (!item.empty) {\r\n                            var valueCurrent, newItem;\r\n                            valueCurrent = item.text.substring(0, posCaret);\r\n                            newItem = item.text.substring(posCaret);\r\n                            item.text = valueCurrent;\r\n                            addItem(newItem, $scope.selected.index);\r\n                            \r\n                            setFocus($scope.selected.index, 0);\r\n                        }\r\n                        if ($event) $event.stopPropagation();\r\n                        if ($event) $event.preventDefault();\r\n                        return false;\r\n                    } \r\n\r\n                    if ($event) $event.preventDefault();\r\n                    return false;\r\n                }\r\n\r\n                // move cursor up\r\n                if ((posCaret === 0 || posCaret == textareaLength) && $scope.checklistContent.length > 1 && $event.keyCode == 38 && !$event.ctrlKey && !$event.shiftKey) {  // insert\r\n                    if ($event) $event.stopPropagation();\r\n                    if ($event) $event.preventDefault();\r\n\r\n                    if (posCaret !== undefined && textareaLength !== undefined && posCaret == 0) {\r\n                        // move to new item\r\n                        if ($scope.selected.index == 0) {\r\n                            $scope.selected.index = $scope.checklistContent.length - 1;\r\n                            var position =  $scope.checklistContent[$scope.selected.index].text.length;\r\n                            setFocus($scope.selected.index, position);\r\n                        } else {\r\n                            $scope.selected.index -= 1;\r\n                            var position =  $scope.checklistContent[$scope.selected.index].text.length;\r\n                            setFocus($scope.selected.index, position);\r\n                        }\r\n                    } else {\r\n                        // move caret to text end\r\n                        setFocus($scope.selected.index, 0);\r\n                    }\r\n\r\n                    return false;\r\n                }\r\n\r\n                // move cursor down\r\n                if ((posCaret === 0 || posCaret == textareaLength) && $scope.checklistContent.length > 1 && $event.keyCode == 40 && !$event.ctrlKey && !$event.shiftKey) {  // insert\r\n                    if ($event) $event.stopPropagation();\r\n                    if ($event) $event.preventDefault();\r\n\r\n                    if (posCaret !== undefined && textareaLength !== undefined && posCaret == textareaLength) {\r\n                        // move to new item\r\n                        if ($scope.selected.index >= $scope.checklistContent.length - 1) {\r\n                            $scope.selected.index = 0;\r\n                            setFocus($scope.selected.index, 0);\r\n                        } else {\r\n                            $scope.selected.index += 1;\r\n                            setFocus($scope.selected.index, 0);\r\n                        }\r\n                    } else {\r\n                        // move caret to text end\r\n                        setFocus($scope.selected.index, textareaLength);\r\n                    }\r\n\r\n                    return false;\r\n                }\r\n\r\n                // delete item\r\n                if (!item.empty && $event.keyCode == 46 && $event.ctrlKey && !$event.shiftKey) {\r\n                    if ($event) $event.stopPropagation();\r\n                    if ($event) $event.preventDefault();\r\n                    onDeleteItem(index, item);\r\n                    return false;\r\n                }\r\n\r\n                // check/uncheck item\r\n                if ($event.keyCode == 32 && $event.ctrlKey && !$event.shiftKey) {\r\n                    if ($event) $event.stopPropagation();\r\n                    if ($event) $event.preventDefault();\r\n                    if (item) {\r\n                        item.checked = !item.checked\r\n                        $scope.onChecklistChange();\r\n                    }\r\n                    return false;\r\n                }\r\n            }\r\n\r\n\r\n            function onAddItem() {\r\n                addItem('', $scope.selected.index - 1);\r\n            };\r\n\r\n            function onChangeItem(index) {\r\n                if (index > -1 && $scope.checklistContent[index] && $scope.checklistContent[index].empty) {\r\n                    if ($scope.checklistContent[index].empty) {\r\n                        $scope.checklistContent[index].empty = false;\r\n                        $scope.checklistContent.push(getNewItem('', true));\r\n                    }\r\n                }\r\n                $scope.onChecklistChange();\r\n            };\r\n\r\n            function onClick($event, index) {\r\n                if (isDisabled()) return;\r\n                $scope.selected.index = index;\r\n\r\n               // if ($event) $event.preventDefault();\r\n            };\r\n\r\n            function onTextAreaClick($event, index) {\r\n                if (isDisabled()) return;\r\n                $scope.selected.index = index;\r\n              //  if ($event) $event.stopPropagation();\r\n            };\r\n\r\n            function onDropComplete(placeIndex, obj, event, componentId) {\r\n                if ($scope.selected.id != componentId) return;\r\n                if (!$scope.selected.drag) return;\r\n                var index = placeIndex;\r\n\r\n                var tmpIndex = $scope.selected.index;\r\n\r\n                var checklist = _.cloneDeep($scope.checklistContent);\r\n\r\n                if (!(tmpIndex == 0 && placeIndex == 1)) {\r\n                    if (tmpIndex > index) {\r\n                        if (index > checklist.length - 1) index = checklist.length - 1;\r\n                        // move up\r\n                        for (var i = 0; i < tmpIndex - index; i++) {\r\n                            checklist[tmpIndex - i] = checklist[tmpIndex - i - 1];\r\n                        }\r\n                        checklist[index] = obj;\r\n                    }\r\n                    if (tmpIndex < index) {\r\n                        index -= 1;\r\n                        //move down\r\n                        for (var i = 0; i < index - tmpIndex; i++) {\r\n                            checklist[tmpIndex + i] = checklist[tmpIndex + i + 1];\r\n                        }\r\n                        checklist[index] = obj;\r\n                    }\r\n\r\n                    $scope.selected.index = index;\r\n                }\r\n\r\n                $scope.checklistContent = checklist;\r\n\r\n                $scope.onChecklistChange();\r\n            };\r\n\r\n            function onMove() {\r\n                setWidth();\r\n                $scope.isWidth = true;\r\n            };\r\n\r\n\r\n            function onStop(id) {\r\n                setTimeout(function () {\r\n                    $scope.selected.drag = $scope.selected.dragInit;\r\n                    $scope.selected.dragId = 0;\r\n                    $scope.$apply();\r\n                },  50);\r\n\r\n                if($scope.isWidth) {\r\n                    setWidth100();\r\n                    $scope.isWidth  = false;\r\n                }\r\n            };\r\n\r\n            function onStart(id) {\r\n                $scope.selected.isChanged = true;\r\n                if (id && id != $scope.selected.dragId) $scope.selected.drag = false;\r\n            };\r\n\r\n            function onDownDragg(item) {\r\n                if ($scope.pipDraggable && $scope.checklistContent.length > 2 && !item.empty) {\r\n                    $rootScope.$broadcast('onChecklistDrag');\r\n                    $scope.selected.dragId = $scope.selected.id;\r\n                }\r\n            };\r\n            \r\n            function onDeleteItem(index, item) {\r\n              \r\n                if ($scope.checklistContent.length == 1) {\r\n                    $scope.checklistContent[0].text = '';\r\n                    $scope.checklistContent[0].checked = false;\r\n                    $scope.checklistContent[0].empty = true;\r\n                    $scope.selected.index = 0;\r\n                } else {\r\n                    if (index >= 0 && index <= $scope.checklistContent.length)\r\n                        $scope.checklistContent.splice(index, 1);\r\n                    else return;\r\n                }\r\n\r\n                if ($scope.selected.index >= $scope.checklistContent.length)\r\n                    $scope.selected.index = $scope.checklistContent.length - 1;\r\n\r\n                setFocus($scope.selected.index, 0);\r\n                \r\n                $scope.onChecklistChange();\r\n            };\r\n\r\n            function onChecked(item) {\r\n                $scope.onChecklistChange();\r\n            };\r\n\r\n            function updateContents() {\r\n                $scope.selected.isChanged = true;\r\n                var content = [], i;\r\n                for (i = 0; i < $scope.checklistContent.length; i++) {\r\n                    if ($scope.checklistContent[i] && !$scope.checklistContent[i].empty) content.push({\r\n                        checked: $scope.checklistContent[i].checked,\r\n                        text: $scope.checklistContent[i].text\r\n                    })\r\n                }\r\n                $scope.pipOptions = content;\r\n            };\r\n\r\n            function onChecklistChange() {\r\n                updateContents();\r\n                if ($scope.pipChanged) {\r\n                    $scope.pipChanged();\r\n                }\r\n            };\r\n\r\n            function setFocus(index, toPos) {\r\n                if (index > -1) {\r\n                    setTimeout(function () {\r\n                        var nextElement = angular.element('#check-item-text-' + $scope.selected.id + '-' + index);\r\n                        if (nextElement) {\r\n                            nextElement.focus();\r\n                            if (toPos !== undefined && nextElement[0]) setCaretToPos(nextElement[0], toPos);\r\n                        }\r\n                    },  50);\r\n                }\r\n            };\r\n\r\n            function addItem(text, index) {\r\n                var newItem = getNewItem(text, false);\r\n                if (index > -1) $scope.selected.index = index;\r\n\r\n                if ($scope.checklistContent.length < 2) {\r\n                    $scope.checklistContent.unshift(newItem);\r\n                }\r\n                else {\r\n                    $scope.checklistContent.splice($scope.selected.index + 1, 0, newItem);\r\n                }\r\n                $scope.selected.index += 1;\r\n                setFocus($scope.selected.index);\r\n\r\n                $scope.onChecklistChange();\r\n            }\r\n\r\n            function getNewItem(text, isEmpty) {\r\n                return {\r\n                    checked: false,\r\n                    text: text || '',\r\n                    empty: isEmpty\r\n                }\r\n            };\r\n\r\n            function now(){\r\n                return +new Date;\r\n            }\r\n\r\n            function clearList() {\r\n                $scope.selected.index = 0;\r\n                $scope.checklistContent = [];\r\n                // push empty item\r\n                $scope.checklistContent.push(getNewItem('', true));\r\n            };\r\n\r\n            function generateList(content) {\r\n                if (!content ||  content.length < 1) {\r\n                    clearList();\r\n                } else {\r\n                    $scope.checklistContent = [];\r\n                    _.each(content, function(item){\r\n                        $scope.checklistContent.push(item);\r\n                    });\r\n                    // push empty item\r\n                    $scope.checklistContent.push(getNewItem('', true));\r\n                }\r\n            };\r\n\r\n            function setWidth100() {\r\n                var element = angular.element('#check-item-' + + $scope.selected.id + '-' + $scope.selected.index);\r\n                element.css( \"width\", 'none');\r\n                element.css( \"max-width\", 'none');\r\n            };\r\n\r\n            function setWidth() {\r\n                if ($scope.isWidth) return;\r\n\r\n                var elementEtalon = angular.element('#check-item-empty-' + $scope.selected.id);\r\n                var value = elementEtalon.width();\r\n                var element = angular.element('#check-item-' + $scope.selected.id + '-' + $scope.selected.index);\r\n                if (element) {\r\n                    element.css(\"width\", value + 'px');\r\n                    element.css(\"max-width\", value + 'px');\r\n                }\r\n            };\r\n\r\n        }]\r\n    );\r\n\r\n})();","/**\r\n * @file Checklist view control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipChecklistView\", ['pipCore', 'pipComposite.Templates']);\r\n\r\n    thisModule.directive('pipChecklistView',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                replace: false,\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    pipChanged: '&',\r\n                    pipOptions: '='\r\n                },\r\n                templateUrl: 'checklist_view/checklist_view.html',\r\n                controller: 'pipChecklistViewController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipChecklistViewController',\r\n        ['$scope', '$element', '$attrs', 'pipUtils', function ($scope, $element, $attrs, pipUtils) {\r\n\r\n            $scope.disableControl = pipUtils.toBoolean($scope.ngDisabled()) != false;\r\n            $scope.rebind = pipUtils.toBoolean($attrs.pipRebind);\r\n            $scope.selected = {};\r\n            $scope.selected.isChanged = false;\r\n\r\n            generateList($scope.pipOptions);\r\n\r\n            // Add class\r\n            $element.addClass('pip-checklist-view');\r\n\r\n            // Watch for options changes\r\n            if (pipUtils.toBoolean($attrs.pipRebind)) {\r\n                $scope.$watchCollection('pipOptions', function (newValue) {\r\n                    if (!$scope.selected.isChanged) {\r\n                        generateList($scope.pipOptions);\r\n                    } else {\r\n                        $scope.selected.isChanged = false;\r\n                    }\r\n                });\r\n            }\r\n\r\n            $scope.updateContents = updateContents;\r\n            $scope.onClick = onClick;\r\n\r\n            return;\r\n\r\n            function updateContents() {\r\n                $scope.selected.isChanged = true;\r\n                $scope.pipOptions = $scope.checklistContent;\r\n            };\r\n\r\n            function onChecklistChange() {\r\n                updateContents();\r\n                if ($scope.pipChanged) {\r\n                    $scope.pipChanged();\r\n                }\r\n            };\r\n\r\n            function clearList() {\r\n                $scope.checklistContent = [];\r\n            };\r\n\r\n            function generateList(content) {\r\n                if (!content ||  content.length < 1) {\r\n                    clearList();\r\n                    return;\r\n                } else {\r\n                    $scope.checklistContent = [];\r\n                    _.each(content, function(item){\r\n                        $scope.checklistContent.push(item);\r\n                    });\r\n                }\r\n            };\r\n\r\n            function onClick($event, item) {\r\n                if ($event) $event.stopPropagation();\r\n                if ($scope.ngDisabled && $scope.ngDisabled()) return;\r\n\r\n                onChecklistChange();\r\n            };\r\n\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Composite edit control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipCompositeEdit\", [\r\n        'pipCore', 'pipDocuments', 'pipLocations', 'pipPictures', 'pipComposite.Templates']);\r\n\r\n    thisModule.config(['pipTranslateProvider', function(pipTranslateProvider) {\r\n        pipTranslateProvider.translations('en', {\r\n            'COMPOSITE_TITLE': 'What\\'s on your mind?',\r\n            'COMPOSITE_PLACEHOLDER': 'Type text ...',\r\n            'COMPOSITE_START_TIME': 'Start time',\r\n            'COMPOSITE_END_TIME': 'End time'\r\n        });\r\n        pipTranslateProvider.translations('ru', {\r\n            'COMPOSITE_TITLE': 'Что у вас на уме?',\r\n            'COMPOSITE_PLACEHOLDER': 'Введите текст ...',\r\n            'COMPOSITE_START_TIME': 'Время начала',\r\n            'COMPOSITE_END_TIME': 'Время окончания'\r\n        });\r\n    }]);\r\n\r\n    thisModule.directive('pipCompositeEdit',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                replace: false,\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    pipChanged: '&',\r\n                    pipContents: '=',\r\n                    compositeId: '=pipCompositeId',\r\n                    pipCompositePlaceholder: '=',\r\n                    pipScrollContainer: '@',\r\n                    pipAddedContent: '&'\r\n                },\r\n                templateUrl: 'composite_edit/composite_edit.html',\r\n                controller: 'pipCompositeEditController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipCompositeEditController',\r\n        ['$scope', '$element', '$attrs', '$rootScope', 'pipUtils', 'pipTranslate', '$document', function ($scope, $element, $attrs, $rootScope, pipUtils, pipTranslate, $document) {\r\n\r\n            var CONTENT_TYPES = ['time', 'text', 'pictures', 'documents', 'checklist', 'location'];\r\n\r\n            $scope.selected = {};\r\n            $scope.selected.id = now();\r\n            $scope.selected.index = 0;\r\n            $scope.selected.drag = true;\r\n            $scope.selected.dragId = 0;\r\n\r\n            $scope.selected.isChanged = false;\r\n            $scope.toolbarButton = {};\r\n            $scope.rebind = pipUtils.toBoolean($attrs.pipRebind);\r\n            $scope.disableControl = pipUtils.toBoolean($scope.ngDisabled()) != false;\r\n            $scope.addedContent = pipUtils.toBoolean($scope.pipAddedContent()) == true;\r\n\r\n            generateList($scope.pipContents);\r\n            setPlaceholder();\r\n\r\n            $rootScope.$on('pipAddCompositeItem', function(event, args) {\r\n                if ($scope.compositeId) {\r\n                    if (args.id && args.id == $scope.compositeId) addItem(args.type);\r\n                } else addItem(args.type);\r\n            });\r\n\r\n            // Watch for options changes\r\n            if (pipUtils.toBoolean($attrs.pipRebind)) {\r\n                $scope.$watchCollection('pipContents', function (newValue, oldValue) {\r\n                    if (!$scope.selected.isChanged || ($scope.pipContents\r\n                        && $scope.pipContents.length != $scope.compositeContent.length)) {\r\n                        generateList($scope.pipContents);\r\n                        $scope.selected.isChanged = false;\r\n                    }\r\n                });\r\n\r\n                $scope.$watch('pipCompositePlaceholder', function (newValue, oldValue) {\r\n                    if ( newValue !== oldValue ) {\r\n                        setPlaceholder();\r\n                    }\r\n                });\r\n            }\r\n\r\n            $element.addClass('pip-composite-edit');\r\n\r\n            $scope.onDeleteItem = onDeleteItem;\r\n            $scope.onContentChange = onContentChange;\r\n            $scope.isSelectedSection = isSelectedSection;\r\n            $scope.onClick = onClick;\r\n            $scope.onDownDragg = onDownDragg;\r\n            $scope.onDraggEnd = onDraggEnd;\r\n            $scope.onDropComplete = onDropComplete;\r\n            $scope.onKeyUp = onKeyUp;\r\n            $scope.onKeyDown = onKeyDown;\r\n            $scope.onStart = onStart;\r\n            $scope.onStop = onStop;\r\n\r\n            $scope.isActiveChecklist = isActiveChecklist;\r\n\r\n            $rootScope.$on('onChecklistDrag', function () {\r\n                $scope.selected.drag = false;\r\n                setTimeout(function () {\r\n                    $scope.selected.drag = false;\r\n                    $scope.$apply();\r\n                },  0);\r\n            });\r\n\r\n            $rootScope.$on('focusedComposite', function () {\r\n                if ($scope.isFirst) {\r\n                    setTimeout(function () {\r\n                        var nextElement = angular.element('#composite-item-text-' + $scope.selected.id + '-0');\r\n                        if (nextElement && !nextElement.is(':focus')) nextElement.focus();\r\n                    },  50);\r\n                }\r\n            });\r\n\r\n            $scope.onCompositeChange = _.debounce(onCompositeChange , 200);\r\n\r\n            return;\r\n\r\n            function isActiveChecklist(obj) {\r\n                //return obj.id == $scope.selected.index  && !$scope.selected.drag;\r\n                return obj.id == $scope.selected.index;\r\n            };\r\n\r\n            function updateContents() {\r\n                $scope.selected.isChanged = true;\r\n                $scope.pipContents = $scope.compositeContent;\r\n            };\r\n\r\n            function getParentIndex(el) {\r\n                if (el.length < 1) return null;\r\n                var elParent = el.parent();\r\n                if (elParent[0] && elParent[0].id && elParent[0].id.indexOf('composite-item-' + $scope.selected.id) > -1) {\r\n                    var strs = elParent[0].id.split('-');\r\n\r\n                    var parentIndex = parseInt(strs[strs.length - 1], 10);\r\n                    return parentIndex;\r\n                } else return getParentIndex(elParent);\r\n            };\r\n\r\n            function onKeyUp($event) {\r\n                if ($event.keyCode == 9) {\r\n                    setTimeout(function () {\r\n                        var focusedElement = angular.element($document[0].activeElement);\r\n                        var parentIndex = getParentIndex(focusedElement);\r\n                        if (parentIndex != null) $scope.selected.index = parentIndex;\r\n                        $scope.$apply($scope.selected.index = $scope.compositeContent[parentIndex].id);\r\n                    },  50);\r\n                }\r\n            };\r\n\r\n            function onKeyDown($event, index, item) {\r\n                if ($scope.ngDisabled()) return;\r\n                // delete item\r\n                if (item && !item.empty && $event.keyCode == 46 && !$event.ctrlKey && $event.shiftKey) {\r\n                    if ($event) $event.stopPropagation();\r\n                    if ($event) $event.preventDefault();\r\n                    if (index > -1) {\r\n                        onDeleteItem(index);\r\n                    }\r\n\r\n                    return false;\r\n                }\r\n            }\r\n\r\n            function onCompositeChange() {\r\n                updateContents();\r\n                if ($scope.pipChanged) $scope.pipChanged();\r\n            };\r\n\r\n            function onDeleteItem(index) {\r\n                if (index < 0 || $scope.compositeContent.length == 0) return;\r\n\r\n                // delete last element in composite\r\n                if ($scope.compositeContent.length == 1) {\r\n                    $scope.compositeContent[0] = {\r\n                        empty: true,\r\n                        id: getId(),\r\n                        type: 'text',\r\n                        text: '', docs: [], pic_ids: [], loc_pos: null, loc_name: '',\r\n                        start: null, end: null, checklist: []\r\n                    };\r\n                    $scope.selected.index = $scope.compositeContent[0].id;\r\n                    onSelect(0);\r\n                    $scope.isFirst = true;\r\n                    setToolbar();\r\n                } else {\r\n                    if (index >= 0 && index < $scope.compositeContent.length)\r\n                        $scope.compositeContent.splice(index, 1);\r\n\r\n                    if (index == $scope.compositeContent.length)\r\n                        $scope.selected.index = $scope.compositeContent[$scope.compositeContent.length - 1].id;\r\n                    else\r\n                        $scope.selected.index = $scope.compositeContent[index].id;\r\n\r\n                    onSelect();\r\n                }\r\n\r\n                setToolbar();\r\n                $scope.onCompositeChange();\r\n            };\r\n\r\n            function onContentChange(obj) {\r\n                if (obj && obj.empty && obj.text) {\r\n                    obj.empty = false;\r\n                    $scope.isFirst = false;\r\n                    setToolbar();\r\n                }\r\n                if (!$scope.ngDisabled()) $scope.onCompositeChange();\r\n            };\r\n\r\n            function isSelectedSection(index, obj) {\r\n                return $scope.selected.index == obj.id && !obj.empty;// && $scope.compositeContent.length > 1;\r\n            };\r\n\r\n            function onDraggEnd() {\r\n                $scope.selected.drag = true;\r\n            };\r\n\r\n            function onStart(id) {\r\n                if (id && id != $scope.selected.dragId) $scope.selected.drag = false;\r\n            };\r\n\r\n            function onStop(id) {\r\n                setTimeout(function () {\r\n                    $scope.selected.drag = true;\r\n                    $scope.selected.dragId = 0;\r\n                    $scope.$apply();\r\n                },  500);\r\n            };\r\n\r\n            function onDownDragg($event, obj) {\r\n                if ($scope.ngDisabled && $scope.ngDisabled()) return;\r\n                $scope.selected.dragId = $scope.selected.id;\r\n                $scope.selected.drag = true;\r\n                $scope.selected.index = obj.id;\r\n            };\r\n\r\n            function onClick($event, index, obj) {\r\n                if ($scope.ngDisabled && $scope.ngDisabled()) return;\r\n                $scope.selected.event = 'onClick';\r\n                if ($event && $event.target && $event.target.tagName &&\r\n                    ($event.target.tagName == 'INPUT' || $event.target.tagName == 'TEXTAREA' )) {\r\n                    $scope.selected.index = obj.id;\r\n                    return;\r\n                }\r\n\r\n                if ( $scope.selected.index == obj.id && obj.type == 'checklist' && obj.checklist.length > 0) return;\r\n                if ( $scope.selected.index == obj.id && obj.type == 'location' ) return;\r\n\r\n                $scope.selected.index = obj.id;\r\n                onSelect();\r\n            };\r\n\r\n            function onDropComplete(placeIndex, obj, event, componentId) {\r\n                if (componentId != $scope.selected.id || !obj || !obj.type) {\r\n                    $scope.compositeContent = _.cloneDeep($scope.pipContents);\r\n                    return;\r\n                }\r\n\r\n                var index = placeIndex;\r\n                var tmpIndex = _.findIndex($scope.compositeContent, {id: obj.id}); //$scope.selected.index});\r\n\r\n                if (!(tmpIndex == 0 && placeIndex == 1)) {\r\n                    if (tmpIndex > index) {\r\n                        if (index > $scope.compositeContent.length - 1) index = $scope.compositeContent.length - 1;\r\n                        // move up\r\n                        for (var i = 0; i < tmpIndex - index; i++) {\r\n                            $scope.compositeContent[tmpIndex - i] = $scope.compositeContent[tmpIndex - i - 1];\r\n                        }\r\n                        $scope.compositeContent[index] = obj;\r\n                    }\r\n                    if (tmpIndex < index) {\r\n                        index -= 1;\r\n                        //move down\r\n                        for (var i = 0; i < index - tmpIndex; i++) {\r\n                            $scope.compositeContent[tmpIndex + i] = $scope.compositeContent[tmpIndex + i + 1];\r\n                        }\r\n                        $scope.compositeContent[index] = obj;\r\n                    }\r\n                    $scope.selected.index = $scope.compositeContent[index].id;\r\n                }\r\n\r\n                onSelect();\r\n                $scope.onCompositeChange();\r\n            };\r\n\r\n            function onSelect(index) {\r\n                if (!index) index = _.findIndex($scope.compositeContent, {id: $scope.selected.index});\r\n                if (index < 0) return;\r\n\r\n                var item = $scope.compositeContent[index];\r\n                if (_.isEmpty(item)) return;\r\n\r\n                switch (item.type) {\r\n                    //case 'text':\r\n                    //        setTimeout(function () {\r\n                    //            var nextElement = angular.element('#composite-item-text-' + $scope.selected.id + '-' + index);\r\n                    //            //var nextElement = angular.element('#composite-item-text-' + $scope.selected.id + '-' + $scope.selected.index);\r\n                    //            if (nextElement && !nextElement.is(':focus')) nextElement.focus();\r\n                    //            //$scope.selected.stopKey = false;\r\n                    //        },  50);\r\n                    //    break;\r\n                    case 'pictures':\r\n                            setTimeout(function () {\r\n                                var nextElement = angular.element(\r\n                                    '#composite-item-' + $scope.selected.id + '-' + index + ' button.pip-picture-upload');\r\n                                if (nextElement && !nextElement.is(':focus')) nextElement.focus();\r\n                                //$scope.selected.stopKey = false;\r\n                            },  50);\r\n                        break;\r\n                    case 'documents':\r\n                            setTimeout(function () {\r\n                                var nextElement = angular.element(\r\n                                    '#composite-item-' + $scope.selected.id + '-' + index + ' button.pip-document-upload');\r\n                                if (nextElement && !nextElement.is(':focus')) nextElement.focus();\r\n                                //$scope.selected.stopKey = false;\r\n                            },  50);\r\n                        break;\r\n                    //case 'checklist':\r\n                    //        setTimeout(function () {\r\n                    //            var nextElement = angular.element(\r\n                    //                '#composite-item-' + $scope.selected.id + '-' + index + ' textarea[id^=\\'empty-item-\\'');\r\n                    //            if (nextElement && !nextElement.is(':focus')) nextElement.focus();\r\n                    //            //$scope.selected.stopKey = false;\r\n                    //        },  50);\r\n                    //    break;\r\n                    case 'location':\r\n                        setTimeout(function () {\r\n                            var nextElement = angular.element(\r\n                                '#composite-item-' + $scope.selected.id + '-' + index + ' .pip-location-empty  button');\r\n                            if (nextElement && !nextElement.is(':focus')) nextElement.focus();\r\n                            //$scope.selected.stopKey = false;\r\n                        },  50);\r\n                        break;\r\n                    case 'time':\r\n                        break;\r\n                }\r\n            };\r\n\r\n            // set element responsive width when element places\r\n            //function setWidth100(index) {\r\n            //    var element = angular.element('#composite-item-' + $scope.selected.id + '-' + index);\r\n            //    element.css( \"width\", 'none');\r\n            //    element.css( \"max-width\", 'none');\r\n            //};\r\n            //\r\n            //// set draggable element width when your dragg\r\n            //function setWidth(index) {\r\n            //    if ($scope.selected.isWidth) return;\r\n            //    var elementEtalon = angular.element('#pip-composite-last-' + + $scope.selected.id);\r\n            //    var value = elementEtalon.width();\r\n            //    var element = angular.element('#composite-item-' + $scope.selected.id + '-' + index);\r\n            //    if (element) {\r\n            //        element.css(\"width\", value + 'px');\r\n            //        element.css(\"max-width\", value + 'px');\r\n            //    }\r\n            //};\r\n\r\n            function setPlaceholder() {\r\n                $scope.compositePlaceholder =\r\n                    ($scope.pipCompositePlaceholder === undefined || $scope.pipCompositePlaceholder ===  null) ?\r\n                            pipTranslate.translate('COMPOSITE_PLACEHOLDER') :\r\n                            pipTranslate.translate($scope.pipCompositePlaceholder);\r\n            };\r\n\r\n            function addItem (contentType, value) {\r\n                if (_.indexOf(CONTENT_TYPES, contentType) < 0) return;\r\n\r\n                // generate new item\r\n                var newItem = {\r\n                    id: getId(),\r\n                    type: contentType,\r\n                    text: contentType == 'text' ? value : '',\r\n                    docs: contentType == 'documents' && value ? value : [],\r\n                    pic_ids: contentType == 'pictures' && value ? value : [],\r\n                    loc_pos: contentType == 'location' && value ? value.loc_pos : null,\r\n                    loc_name: contentType == 'location' && value ? value.loc_name : '',\r\n                    start: contentType == 'time' && value ? value.start : null,\r\n                    end: contentType == 'time' && value ? value.end : null,\r\n                    checklist: contentType == 'checklist' && value ? value : []\r\n                };\r\n\r\n                // calculate current index\r\n                var index = _.findIndex($scope.compositeContent, {id: $scope.selected.index});\r\n                index = index < 0 ? 0 : index;\r\n\r\n                // insert new element and select it\r\n                if ($scope.compositeContent.length == 1 && $scope.compositeContent[0].empty) {\r\n                    //newItem.id = $scope.compositeContent[0].id;\r\n                    $scope.compositeContent[0] = newItem;\r\n                } else {\r\n                    $scope.compositeContent.splice(index + 1, 0, newItem);\r\n                    index += 1;\r\n                }\r\n\r\n                // insert new element and select it\r\n                $scope.selected.index = newItem.id;\r\n                onSelect();\r\n\r\n                // focus to new element\r\n                setTimeout(scrollTo($scope.pipScrollContainer, '#composite-item-' + $scope.selected.id + '-' + index), 1000);\r\n\r\n                // set toolbar\r\n                $scope.isFirst = false;\r\n                setToolbar();\r\n                $scope.onCompositeChange();\r\n            };\r\n\r\n            function getId() {\r\n                var id = -1;\r\n                _.each($scope.compositeContent, function(item) {\r\n                    if ( id < item.id ) id = item.id;\r\n                });\r\n                return id + 1;\r\n            };\r\n\r\n            function scrollTo(parentElement, childElement) {\r\n                if(!parentElement || !childElement) return;\r\n                setTimeout(function () {\r\n                    if (!$(childElement).position()) return;\r\n                    var modDiff= Math.abs($(parentElement).scrollTop() - $(childElement).position().top);\r\n                    if (modDiff < 20) return;\r\n                    var scrollTo = $(parentElement).scrollTop() + ($(childElement).position().top - 20);\r\n                    $(parentElement).animate({\r\n                        scrollTop: scrollTo + 'px'\r\n                    }, 300);\r\n                }, 100);\r\n            };\r\n\r\n            function generateList(content) {\r\n                if (!content ||  content.length < 1) {\r\n                    clearList();\r\n                    return;\r\n                } else {\r\n                    $scope.compositeContent = [];\r\n                    _.each(content, function(item){\r\n                        item.id = getId();\r\n                        $scope.compositeContent.push(item);\r\n                    });\r\n                    $scope.isFirst = false;\r\n                }\r\n\r\n                setToolbar();\r\n            };\r\n\r\n            function setToolbar(){\r\n                if ($scope.compositeContent.length > 2) return;\r\n                $rootScope.$emit('pipCompositeNotEmpty', !$scope.isFirst);\r\n            };\r\n\r\n            function clearList() {\r\n                $scope.compositeContent = [];\r\n                $scope.compositeContent.push({\r\n                    empty: true,\r\n                    id: getId(),\r\n                    type: 'text',\r\n                    text: '', docs: [], pic_ids: [], loc_pos: null, loc_name: '',\r\n                    start: null, end: null, checklist: []\r\n                });\r\n                $scope.isFirst = true;\r\n            };\r\n\r\n            function now(){\r\n                return +new Date;\r\n            }\r\n        }]\r\n    );\r\n\r\n})();","/**\r\n * @file Composite summary control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipCompositeSummary\", [\r\n        'pipCore', 'pipDocuments', 'pipLocations', 'pipPictures', 'pipComposite.Templates']);\r\n\r\n    thisModule.directive('pipCompositeSummary',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    pipContents: '=',\r\n                    pipChecklistSize: '=',\r\n                    pipTextSize: '=',\r\n                    pipPrimaryBlockLimit: '=',\r\n                    pipSecondaryBlockLimit: '=',\r\n                    pipSecondaryBlockTypes: '='\r\n                },\r\n                templateUrl: 'composite_summary/composite_summary.html',\r\n                controller: 'pipCompositeSummaryController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipCompositeSummaryController',\r\n        ['$scope', '$element', '$attrs', 'pipUtils', function ($scope, $element, $attrs, pipUtils) {\r\n\r\n            $scope.rebind = pipUtils.toBoolean($attrs.pipRebind);\r\n            $scope.disableControl = true;\r\n            $scope.disabledChecklist = true;\r\n\r\n            $scope.secondaryBlockTypes = $scope.pipSecondaryBlockTypes !== undefined &&\r\n                Array.isArray($scope.pipSecondaryBlockTypes) ? $scope.pipSecondaryBlockTypes :\r\n                 ['checklist', 'documents', 'location', 'time'];\r\n            $scope.textSize = $scope.pipTextSize !== undefined && $scope.pipTextSize > 0 ? $scope.pipTextSize : 0;\r\n            $scope.secondaryBlockLimit = $scope.pipSecondaryBlockLimit !== undefined && $scope.pipSecondaryBlockLimit > 0 ? $scope.pipSecondaryBlockLimit : -1;\r\n            $scope.checklistSize = $scope.pipChecklistSize !== undefined && $scope.pipChecklistSize > 0 ? $scope.pipChecklistSize : 0;\r\n            $scope.primaryBlockLimit = $scope.pipPrimaryBlockLimit !== undefined ? $scope.pipPrimaryBlockLimit : -1;\r\n\r\n            generateList($scope.pipContents);\r\n\r\n            // Watch for options changes\r\n            if (pipUtils.toBoolean($attrs.pipRebind)) {\r\n                $scope.$watchCollection('pipContents', function (newValue) {\r\n                    if (!Array.isArray($scope.pipContents)) {\r\n                        throw new Error('Error: Attribute pip-contents must be array!');\r\n                    }\r\n                    generateList($scope.pipContents);\r\n                });\r\n            }\r\n\r\n            // Add class\r\n            $element.addClass('pip-composite-summary');\r\n\r\n            return;\r\n\r\n            // усекаем чеклист до 3\r\n            function limitChecklist(content, val) {\r\n                if (!val) return;\r\n                _.each(content, function(item) {\r\n                    if (item && item.type == 'checklist') {\r\n                        var checklistLength = item.checklist.length;\r\n                        item.checklist =_.take(item.checklist, val);\r\n                        if (checklistLength > val) item.checklist.push({\r\n                            text: '...',\r\n                             checked: false\r\n                        });\r\n                    }\r\n                });\r\n            };\r\n\r\n            // отбираем текст и картинки\r\n            function selectSummary(content) {\r\n                var result = [],\r\n                    i = 0;\r\n\r\n                _.each(content, function(item) {\r\n                    if ($scope.primaryBlockLimit >= 0 && i >= $scope.primaryBlockLimit) return result;\r\n\r\n                    //if (item.type == 'text' || item.type == 'pictures' ) {\r\n                    if ($scope.secondaryBlockTypes.indexOf(item.type) < 0) {\r\n                        result.push(item);\r\n                        i += 1;\r\n                    }\r\n                });\r\n\r\n                return result;\r\n            };\r\n\r\n            // отбираем остальные блоки если они есть\r\n            function selectSummarySecondary(content, types) {\r\n                var i, limit =  $scope.secondaryBlockLimit < 0 ? content.length : $scope.secondaryBlockLimit;\r\n                var result = [];\r\n\r\n                for (i = 0; i < content.length; i++ ) {\r\n                    if (types.indexOf(content[i].type) > -1) {\r\n                        result.push(content[i]);\r\n                        if (result.length >= limit) break;\r\n                    }\r\n                }\r\n\r\n                return result;\r\n            };\r\n\r\n            function generateList(content) {\r\n                if (!content ||  content.length < 1) {\r\n                    clearList();\r\n                    return;\r\n                } else {\r\n                     var summaryContent = _.cloneDeep(content);\r\n                    var result = selectSummary(summaryContent);\r\n                    if (result.length == 0) {\r\n                        result = selectSummarySecondary(summaryContent, $scope.secondaryBlockTypes);\r\n                    }\r\n\r\n                    limitChecklist(result, $scope.checklistSize);\r\n\r\n                    var id = 0;\r\n                    _.each(result, function(item){\r\n                        item.id = id;\r\n                        id ++;\r\n                    });\r\n                    $scope.compositeContent = result;\r\n                }\r\n            };\r\n\r\n            function clearList() {\r\n                $scope.compositeContent = [];\r\n            };\r\n\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Composite toolbar control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipCompositeToolbar\", ['pipCore', 'pipComposite.Templates']);\r\n\r\n    thisModule.config(['pipTranslateProvider', function(pipTranslateProvider) {\r\n        pipTranslateProvider.translations('en', {\r\n            'TEXT':'Text',\r\n            'CHECKLIST':'Checklist',\r\n            'LOCATION':'Location',\r\n            'PICTURE':'Picture',\r\n            'TIME':'Time',\r\n            'DOCUMENT':'Document'\r\n        });\r\n\r\n        pipTranslateProvider.translations('ru', {\r\n            'TEXT':'Текст',\r\n            'CHECKLIST':'Список',\r\n            'LOCATION':'Локация',\r\n            'PICTURE':'Изображение',\r\n            'TIME':'Время',\r\n            'DOCUMENT':'Document'\r\n        });\r\n    }]);\r\n\r\n    thisModule.directive('pipCompositeToolbar',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                replace: false,\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    pipCompositeEmpty: '&',  // set init state of toolbar\r\n                    pipToolbarButton: '=',  // set visibility toolbar button, true by default\r\n                    compositeId: '=pipCompositeId' // set pip-composite-id, for some composite in one scope\r\n                },\r\n                templateUrl: 'composite_toolbar/composite_toolbar.html',\r\n                controller: 'pipCompositeToolbarController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipCompositeToolbarController',\r\n        ['$scope', '$element', '$attrs', '$rootScope', 'pipUtils', function ($scope, $element, $attrs, $rootScope, pipUtils) {\r\n\r\n            $scope.toolbarButton = {};\r\n            $scope.emptyState = pipUtils.toBoolean($scope.pipCompositeEmpty()) != false;\r\n            $scope.disableControl = pipUtils.toBoolean($scope.ngDisabled()) != false;\r\n\r\n            setOption();\r\n\r\n            $scope.onAddItem = onAddItem;\r\n\r\n            $rootScope.$on('pipCompositeNotEmpty', function(event, value) {\r\n                $scope.emptyState = !value;\r\n            });\r\n\r\n            // Add class\r\n            $element.addClass('pip-composite-toolbar');\r\n\r\n            return;\r\n\r\n            function onAddItem(contentType) {\r\n                $rootScope.$emit('pipAddCompositeItem', {type: contentType, id: $scope.compositeId});\r\n            };\r\n\r\n            function setOption() {\r\n                if ($scope.pipToolbarButton !== null && $scope.pipToolbarButton !== undefined) {\r\n                    $scope.toolbarButton.picture = $scope.pipToolbarButton.picture === false ? $scope.pipToolbarButton.picture : true;\r\n                    $scope.toolbarButton.document = $scope.pipToolbarButton.document === false ? $scope.pipToolbarButton.document : true;\r\n                    $scope.toolbarButton.location = $scope.pipToolbarButton.location === false ? $scope.pipToolbarButton.location : true;\r\n                    $scope.toolbarButton.event = $scope.pipToolbarButton.event === false ? $scope.pipToolbarButton.event : true;\r\n                    $scope.toolbarButton.checklist = $scope.pipToolbarButton.checklist === false ? $scope.pipToolbarButton.checklist : true;\r\n                } else {\r\n                    $scope.toolbarButton.picture = true;\r\n                    $scope.toolbarButton.document = true;\r\n                    $scope.toolbarButton.location = true;\r\n                    $scope.toolbarButton.event = true;\r\n                    $scope.toolbarButton.checklist = true;\r\n                }\r\n                $scope.toolbarButton.text = true;\r\n            };\r\n\r\n        }]\r\n    );\r\n\r\n})();","/**\r\n * @file Composite view control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipCompositeView\", [\r\n        'pipCore', 'pipDocuments', 'pipLocations', 'pipPictures', 'pipComposite.Templates']);\r\n\r\n    thisModule.directive('pipCompositeView',\r\n        function () {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: {\r\n                    ngDisabled: '&',\r\n                    pipDisabledChecklist: '&',\r\n                    pipChanged: '&',\r\n                    pipContents: '='\r\n                },\r\n                templateUrl: 'composite_view/composite_view.html',\r\n                controller: 'pipCompositeViewController'\r\n            }\r\n        }\r\n    );\r\n\r\n    thisModule.controller('pipCompositeViewController',\r\n        ['$scope', '$element', '$attrs', 'pipUtils', function ($scope, $element, $attrs, pipUtils) {\r\n\r\n            $scope.rebind = pipUtils.toBoolean($attrs.pipRebind);\r\n            $scope.disableControl = pipUtils.toBoolean($scope.ngDisabled()) != false;\r\n            $scope.disabledChecklist = pipUtils.toBoolean($scope.pipDisabledChecklist()) != false;\r\n            $scope.selected = {};\r\n            $scope.selected.isChanged = false;\r\n            generateList($scope.pipContents);\r\n\r\n            $scope.onContentChange = onContentChange;\r\n            $scope.isDisabled = isDisabled;\r\n\r\n            // Watch for options changes\r\n            if (pipUtils.toBoolean($attrs.pipRebind)) {\r\n                $scope.$watchCollection('pipContents', function (newValue) {\r\n                    if (!Array.isArray($scope.pipContents)) {\r\n                        // throw new Error('Error: Attribute pip-contents must be array!');\r\n                        return;\r\n                    }\r\n                    if (!$scope.selected.isChanged) {\r\n                        generateList($scope.pipContents);\r\n                    } else {\r\n                        $scope.selected.isChanged = false;\r\n                    }\r\n                });\r\n            }\r\n\r\n            // Add class\r\n            $element.addClass('pip-composite-view');\r\n\r\n            return;\r\n\r\n            function isDisabled() {\r\n                return pipUtils.toBoolean($scope.pipDisabledChecklist()) == true ||\r\n                    pipUtils.toBoolean($scope.ngDisabled()) == true;\r\n            };\r\n\r\n            function updateContents() {\r\n                $scope.selected.isChanged = true;\r\n                $scope.pipContents = $scope.compositeContent;\r\n            };\r\n\r\n            function onContentChange() {\r\n                onCompositeChange();\r\n            };\r\n\r\n            function onCompositeChange() {\r\n                updateContents();\r\n                if ($scope.pipChanged)\r\n                    $scope.pipChanged();\r\n            };\r\n\r\n            function generateList(content) {\r\n                if (!content ||  content.length < 1) {\r\n                    clearList();\r\n                    return;\r\n                } else {\r\n                    $scope.compositeContent = [];\r\n                    var id = 0;\r\n                    _.each(content, function(item){\r\n                        if (typeof(item) != 'object' || item == null) {\r\n                            throw new Error('Error: content error!');\r\n                        }\r\n                        item.id = id;\r\n                        id ++;\r\n                        $scope.compositeContent.push(item);\r\n                    });\r\n                }\r\n            };\r\n\r\n            function clearList() {\r\n                $scope.compositeContent = [];\r\n            };\r\n\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Content switch control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n * @todo\r\n * - Remove after composite content control is ready\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipContentSwitch\", ['pipComposite.Templates']);\r\n\r\n    thisModule.directive('pipContentSwitch', \r\n        ['$parse', function($parse) {\r\n            return {\r\n                restrict: 'EA',\r\n                scope: false,\r\n                templateUrl: 'content_switch/content_switch.html',\r\n                link: function($scope, $element, $attrs) {\r\n    \r\n                    var parentElementNameGetter = $parse($attrs.pipParentElementName);\r\n                    var parentElement = parentElementNameGetter($scope);\r\n\r\n                    $scope.onButtonClick = onButtonClick;\r\n\r\n                    // Initialization\r\n                    setOption();\r\n                    $element.addClass('pip-content-switch');\r\n\r\n                    return ;\r\n\r\n                    function scrollTo(childElement) {\r\n                        setTimeout(function () {\r\n                            var modDiff= Math.abs($(parentElement).scrollTop() - $(childElement).position().top);\r\n                            if (modDiff < 20) return;\r\n                            var scrollTo = $(parentElement).scrollTop() + ($(childElement).position().top - 20);\r\n                            $(parentElement).animate({\r\n                                scrollTop: scrollTo + 'px'\r\n                            }, 300);\r\n                        }, 100);\r\n                    };\r\n    \r\n                    function setOption() {\r\n                        if ($scope.contentSwitchOption !== null && $scope.contentSwitchOption !== undefined) {\r\n                            $scope.showIconPicture = $scope.contentSwitchOption.picture ? $scope.contentSwitchOption.picture : $scope.showIconPicture;\r\n                            $scope.showIconDocument = $scope.contentSwitchOption.document ? $scope.contentSwitchOption.document : $scope.showIconDocument;\r\n                            $scope.showIconLocation = $scope.contentSwitchOption.location ? $scope.contentSwitchOption.location : $scope.showIconLocation;\r\n                            $scope.showIconEvent = $scope.contentSwitchOption.event ? $scope.contentSwitchOption.event : $scope.showIconEvent;\r\n                        } else {\r\n                            $scope.showIconPicture = true;\r\n                            $scope.showIconDocument = true;\r\n                            $scope.showIconLocation = true;\r\n                            $scope.showIconEvent = true;\r\n                        }\r\n                    };\r\n    \r\n                    function onButtonClick(type) {\r\n                        if (!parentElement) return;\r\n    \r\n                        switch(type){\r\n                            case 'event':\r\n                                // On Event click action\r\n                                if ($scope.showEvent)\r\n                                    scrollTo('.event-edit');\r\n                                break;\r\n                            case 'documents':\r\n                                // On Documents click action\r\n                                if ($scope.showDocuments)\r\n                                    scrollTo('.pip-document-list-edit');\r\n                                break;\r\n                            case 'pictures':\r\n                                // On Pictures click action\r\n                                if ($scope.showPictures)\r\n                                    scrollTo('.pip-picture-list-edit');\r\n                                break;\r\n                            case 'location':\r\n                                // On Location click action\r\n                                if ($scope.showLocation)\r\n                                    scrollTo('.pip-location-edit');\r\n                                break;\r\n                        };\r\n                    };\r\n\r\n                }\r\n            };\r\n        }]\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Touch start control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipMobileMousedown\", []);\r\n\r\n    thisModule.directive('pipMobileMousedown',\r\n        function () {\r\n            return function (scope, elem, attrs) {\r\n                elem.bind(\"touchstart mousedown\", function (e) {\r\n            //        e.preventDefault();\r\n            //        e.stopPropagation();\r\n                    scope.$apply(attrs[\"pipMobileMousedown\"]);\r\n            //        e.preventDefault();\r\n                });\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Touch start control\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipMobileMouseup\", []);\r\n\r\n    thisModule.directive('pipMobileMouseup',\r\n        function () {\r\n            return function (scope, elem, attrs) {\r\n                elem.bind(\"touchend mouseup\", function (e) {\r\n                //    e.preventDefault();\r\n         //           e.stopPropagation();\r\n                    scope.$apply(attrs[\"pipMobileMouseup\"]);\r\n                });\r\n            }\r\n        }\r\n    );\r\n\r\n})();\r\n","/**\r\n * @file Keyboard navigation with scrolling over non-focusable controls\r\n * @copyright Digital Living Software Corp. 2014-2016\r\n */\r\n\r\n/* global angular */\r\n\r\n(function () {\r\n    'use strict';\r\n\r\n    var thisModule = angular.module(\"pipCompositeFocused\", []);\r\n\r\n    thisModule.directive('pipCompositeFocused', function () {\r\n        return {\r\n            restrict: 'A',\r\n            scope: false,\r\n            controller: 'pipCompositeFocusedController'\r\n        };\r\n    });\r\n\r\n    thisModule.controller('pipCompositeFocusedController',\r\n        ['$scope', '$element', '$rootScope', function ($scope, $element, $rootScope) {\r\n            $element.bind(\"touchstart mousedown\", function (e) {\r\n                $rootScope.$broadcast('focusedComposite');\r\n            });\r\n        }]\r\n    );\r\n\r\n})();\r\n\r\n"],"sourceRoot":"/source/"}
>>>>>>> 8b58bed06c1c3a06287f101e2e4569d656a362f8
